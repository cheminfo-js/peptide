{"version":3,"sources":["webpack://Peptide/webpack/universalModuleDefinition","webpack://Peptide/webpack/bootstrap","webpack://Peptide/./src/aminoAcids.js","webpack://Peptide/./src/splitPeptide.js","webpack://Peptide/./src/index.js","webpack://Peptide/./src/isoElectricPoint.js","webpack://Peptide/./src/chargePeptide.js","webpack://Peptide/./src/getAA.js","webpack://Peptide/./src/allowNeutralLoss.js","webpack://Peptide/./src/digestPeptide.js","webpack://Peptide/./src/generatePeptideFragments.js"],"names":["module","exports","name","aa3","aa1","sc","type","pKaC","pKaN","pKa","splitSequence","sequence","aas","replace","split","begin","end","length","slice","aa","require","IEP","chargePeptide","allowNeutralLoss","splitPeptide","digestPeptide","generatePeptideFragments","getInfo","calculateIEP","result","calculateIEPChart","calculateChart","getColorForIEP","iep","getColor","calculateCharge","ph","aa1To3","code","i","Error","converAA1To3","mf","newmf","charAt","capitalizeAA3","regexp","RegExp","convertAASequence","search","tmpmf","parts","substr","toLowerCase","sequenceToMF","aaObject","pH","combined","combine","charge","calculateForPh","Math","round","first","last","current","previous","currentCharge","abs","y","x","yAbs","push","total","pow","key","acid","basic","white","getAA","options","undefined","Array","isArray","chargeOnePeptide","match","firstAA","lastAA","allowOneNeutralLoss","digestSequence","enzyme","minMissed","maxMissed","minResidue","maxResidue","Number","MAX_VALUE","getRegexp","fragments","from","nbResidue","to","results","j","min","fragment","k","a","b","c","z","ya","yb","yc","zc","maxInternal","minInternal","mfs","mfparts","nTerm","cTerm","addNTerm","addCTerm","iTerm","addITerm","concat"],"mappings":"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","file":"peptide.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Peptide\"] = factory();\n\telse\n\t\troot[\"Peptide\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","'use strict';\n\n// SOURCE: https://en.wikipedia.org/wiki/Amino_acid\nmodule.exports = [\n    // Standard amino acids\n    {\n        name: \"Alanine\",\n        aa3: \"Ala\",\n        aa1: \"A\",\n        sc: {\n            type: \"hydrophobic\"\n        },\n        pKaC: 2.33,\n        pKaN: 9.71\n    },\n    {\n        name: \"Arginine\",\n        aa3: \"Arg\",\n        aa1: \"R\",\n        sc: {\n            type: \"positive\",\n            pKa: 12.10\n        },\n        pKaC: 2.03,\n        pKaN: 9.00\n    },\n    {\n        name: \"Asparagine\",\n        aa3: \"Asn\",\n        aa1: \"N\",\n        sc: {\n            type: \"polar\"\n        },\n        pKaC: 2.13,\n        pKaN: 9.05\n    },\n    {\n        name: \"Aspartic acid\",\n        aa3: \"Asp\",\n        aa1: \"D\",\n        sc: {\n            type: \"negative\",\n            pKa: 3.71\n        },\n        pKaC: 1.95,\n        pKaN: 9.66\n    },\n    {\n        name: \"Cysteine\",\n        aa3: \"Cys\",\n        aa1: \"C\",\n        sc: {\n            type: \"special\",\n            pKa: 8.14\n        },\n        pKaC: 1.91,\n        pKaN: 10.28\n    },\n    {\n        name: \"Glutamic acid\",\n        aa3: \"Glu\",\n        aa1: \"E\",\n        sc: {\n            type: \"negative\",\n            pKa: 4.15\n        },\n        pKaC: 2.16,\n        pKaN: 9.58\n    },\n    {\n        name: \"Glutamine\",\n        aa3: \"Gln\",\n        aa1: \"Q\",\n        sc: {\n            type: \"polar\"\n        },\n        pKaC: 2.18,\n        pKaN: 9.00\n    },\n    {\n        name: \"Glycine\",\n        aa3: \"Gly\",\n        aa1: \"G\",\n        sc: {\n            type: \"special\"\n        },\n        pKaC: 2.34,\n        pKaN: 9.58\n    },\n    {\n        name: \"Histidine\",\n        aa3: \"His\",\n        aa1: \"H\",\n        sc: {\n            type: \"positive\",\n            pKa: 6.04\n        },\n        pKaC: 1.70,\n        pKaN: 9.09\n    },\n    {\n        name: \"Isoleucine\",\n        aa3: \"Ile\",\n        aa1: \"I\",\n        sc: {\n            type: \"hydrophobic\"\n        },\n        pKaC: 2.26,\n        pKaN: 9.60\n    },\n    {\n        name: \"Leucine\",\n        aa3: \"Leu\",\n        aa1: \"L\",\n        sc: {\n            type: \"hydrophobic\"\n        },\n        pKaC: 2.32,\n        pKaN: 9.58\n    },\n    {\n        name: \"Lysine\",\n        aa3: \"Lys\",\n        aa1: \"K\",\n        sc: {\n            type: \"positive\",\n            pKa: 10.67\n        },\n        pKaC: 2.15,\n        pKaN: 9.16\n    },\n    {\n        name: \"Methionine\",\n        aa3: \"Met\",\n        aa1: \"M\",\n        sc: {\n            type: \"hydrophobic\"\n        },\n        pKaC: 2.16,\n        pKaN: 9.08\n    },\n    {\n        name: \"Phenylalanine\",\n        aa3: \"Phe\",\n        aa1: \"F\",\n        sc: {\n            type: \"hydrophobic\"\n        },\n        pKaC: 2.18,\n        pKaN: 9.09\n    },\n    {\n        name: \"Proline\",\n        aa3: \"Pro\",\n        aa1: \"P\",\n        sc: {\n            type: \"special\"\n        },\n        pKaC: 1.95,\n        pKaN: 10.47\n    },\n    {\n        name: \"Serine\",\n        aa3: \"Ser\",\n        aa1: \"S\",\n        sc: {\n            type: \"polar\"\n        },\n        pKaC: 2.13,\n        pKaN: 9.05\n    },\n    {\n        name: \"Threonine\",\n        aa3: \"Thr\",\n        aa1: \"T\",\n        sc: {\n            type: \"polar\"\n        },\n        pKaC: 2.20,\n        pKaN: 8.96\n    },\n    {\n        name: \"Tryptophan\",\n        aa3: \"Trp\",\n        aa1: \"W\",\n        sc: {\n            type: \"hydrophobic\"\n        },\n        pKaC: 2.38,\n        pKaN: 9.34\n    },\n    {\n        name: \"Tyrosine\",\n        aa3: \"Tyr\",\n        aa1: \"Y\",\n        sc: {\n            type: \"hydrophobic\"\n        },\n        pKaC: 2.24,\n        pKaN: 9.04\n    },\n    {\n        name: \"Valine\",\n        aa3: \"Val\",\n        aa1: \"V\",\n        sc: {\n            type: \"hydrophobic\"\n        },\n        pKaC: 2.27,\n        pKaN: 9.52\n    },\n    // Additional\n    {\n        name: \"Selenocysteine\",\n        aa3: \"Sec\",\n        aa1: \"U\"\n    },\n    {\n        name: \"Pyrrolysine\",\n        aa3: \"Pyl\",\n        aa1: \"O\"\n    },\n    // Ambiguous\n    {\n        name: \"Asparagine or aspartic acid\",\n        aa3: \"Asx\",\n        aa1: \"B\"\n    },\n    {\n        name: \"Glutamine or glutamic acid\",\n        aa3: \"Glx\",\n        aa1: \"Z\"\n    },\n    {\n        name: \"Leucine or isoleucine\",\n        aa3: \"Xle\",\n        aa1: \"J\"\n    },\n    {\n        name: \"Unspecified or unknown\",\n        aa3: \"Xaa\",\n        aa1: \"X\"\n    }\n];\n","'use strict';\n\nfunction splitSequence(sequence) {\n    var aas=sequence.replace(/([A-Z])/g,\" $1\").split(/ /);\n    var begin=0;\n    while (aas[begin]==='' || aas[begin]==='H') {\n        begin++;\n    }\n    var end=aas.length-1;\n    while (aas[end]==='O' || aas[end]==='H') {\n        end--;\n    }\n    aas=aas.slice(begin,end+1);\n    return aas;\n}\n\n\nmodule.exports = splitSequence;\n\n","'use strict';\n\nvar aa = require('./aminoAcids');\nvar IEP = require('./isoElectricPoint');\nvar chargePeptide = require('./chargePeptide');\nvar allowNeutralLoss = require('./allowNeutralLoss');\nvar splitPeptide = require('./splitPeptide');\nvar digestPeptide = require('./digestPeptide');\nvar generatePeptideFragments = require('./generatePeptideFragments');\n\nexports.getInfo = function () {\n    return aa;\n}\n\n// sequence should be in the \"right\" format like HAlaGlyProOH\n\nexports.splitPeptide=splitPeptide;\nexports.digestPeptide=digestPeptide;\n\nexports.calculateIEP = function (sequence) {\n    var aas=splitPeptide(sequence);\n    var result=IEP.calculateIEP(aas);\n    return result;\n}\n\nexports.calculateIEPChart = function (sequence) {\n    var aas=splitPeptide(sequence);\n    var result=IEP.calculateChart(aas);\n    return result;\n}\n\n\nexports.getColorForIEP = function (iep) {\n    return IEP.getColor(iep);\n}\n\nexports.calculateCharge = function (sequence, ph) {\n    var aas=splitPeptide(sequence);\n    return IEP.calculateCharge(aas, ph);\n}\n\nexports.generatePeptideFragments = generatePeptideFragments;\n\nexports.chargePeptide = chargePeptide;\nexports.allowNeutralLoss = allowNeutralLoss;\n\nfunction aa1To3(code) {\n    for (var i = 0; i < aa.length; i++) {\n        if (aa[i].aa1 === code) {\n            return aa[i].aa3;\n        }\n    }\n    throw new Error('Invalid 1 letter code: ' + code);\n}\n\nfunction converAA1To3(mf) {\n    var newmf = '';\n    for (var i = 0; i < mf.length; i++) {\n        newmf += aa1To3(mf.charAt(i));\n    }\n    return newmf;\n}\n\nfunction capitalizeAA3(mf) {\n    for (var i = 0; i < aa.length; i++) {\n        var regexp = new RegExp(aa[i].aa3, 'gi');\n        mf = mf.replace(regexp, aa[i].aa3);\n    }\n    return mf;\n}\n\nfunction convertAASequence(mf) {\n    // this function will check if it is a sequence of aa in 1 letter or 3 letters and convert them if it is the case\n    // it could be a multiline mf !\n    // if it is a multiline we could make some \"tricks\" ...\n    var newmf = mf;\n    // SEQRES   1 B  256  MET PRO VAL GLU ILE THR VAL LYS GLU LEU LEU GLU ALA\n    // SEQRES   2 B  256  GLY VAL HIS PHE GLY HIS GLU ARG LYS ARG TRP ASN PRO\n    // or\n    // MET PRO VAL GLU ILE THR VAL LYS GLU LEU LEU GLU ALA\n    // GLY VAL HIS PHE GLY HIS GLU ARG LYS ARG TRP ASN PRO\n    if (mf.search(/[A-Z]{3} [A-Z]{3} [A-Z]{3}/) > -1) {\n        // this is a PDB !\n        var tmpmf = mf.replace(/[\\r\\n]+/g, ' ');\n        tmpmf = tmpmf.replace(/(SEQRES|[0-9]+| [A-Z] | [0-9A-Z]{4-50})/g, '');\n        // we need to correct the uppercase / lowercase\n        var parts = tmpmf.split(' ');\n        newmf = 'H';\n        for (var i = 0; i < parts.length; i++) {\n            newmf += parts[i].substr(0, 1) + parts[i].substr(1).toLowerCase();\n        }\n        newmf += 'OH';\n    } else if ((mf.search(/[A-Z]{3}/) > -1) && (mf.search(/[a-zA-Z][a-z0-9]/) == -1)) {\n        // UNIPROT\n        //   370        380        390        400        410        420\n        //GFKPNLRKTF VSGLFRESCG AHFYRGVDVK PFYIKKPVDN LFALMLILNR LRGWGVVGGM\n        //\n        //    430        440        450        460        470        480\n        //SDPRLYKVWV RLSSQVPSMF FGGTDLAADY YVVSPPTAVS VYTKTPYGRL LADTRTSGFR\n        // We remove all the number, all the spaces, etc\n        newmf = 'H' + converAA1To3(newmf.replace(/[^A-Z]/g, '')) + 'OH';\n    }\n\n    return newmf;\n\n};\n\nexports.convertAASequence = convertAASequence;\n\nexports.sequenceToMF = convertAASequence;\n\n","'use strict';\n\n\nvar aa = require('./aminoAcids');\n\n// we will convert the data to an object to be much faster\nvar aaObject={};\nfor (var i=0; i<aa.length; i++) {\n    aaObject[aa[i].aa3]=aa[i];\n}\n\n\n\nfunction calculateCharge(aas, pH) {\n    if (! pH) pH=7.0;\n    var combined=combine(aas);\n    if (!combined) return;\n    var charge=calculateForPh(combined, pH);\n    return Math.round(charge*1000)/1000;\n}\n\n// this methods required an array of aas\n\nfunction calculateIEP(aas) {\n    var combined=combine(aas);\n    if (!combined) return;\n    var first=0;\n    var last=14;\n    var current=14;\n    var previous=0;\n    var currentCharge;\n    while (Math.abs(current-previous)>0.0001) {\n        previous=current;\n        current=(last + first) / 2;\n        currentCharge=calculateForPh(combined, current);\n        if (currentCharge>0) {\n            first=current;\n        } else if (currentCharge<0) {\n            last=current;\n        } else {\n            previous=current;\n        }\n    }\n    return Math.round(current*1000)/1000;\n}\n\nfunction calculateChart(aas) {\n    var combined=combine(aas);\n    if (!combined) return;\n    var y=[];\n    var x=[];\n    var yAbs=[];\n    for (var i=0; i<=14; i=i+0.01) {\n        var charge=calculateForPh(combined, i);\n        x.push(i);\n        y.push(charge);\n        yAbs.push(Math.abs(charge));\n    }\n    combined.x=x;\n    combined.y=y;\n    combined.yAbs=yAbs;\n\n    return combined;\n}\n\n\nfunction calculateForPh(combined, pH) {\n    var total=0;\n    total+=1/(1+Math.pow(10,pH-combined.first));\n    total+=-1/(1+Math.pow(10,combined.last-pH));\n    for (var key in combined.acid) {\n        total+=-combined.acid[key]/(1+Math.pow(10,aaObject[key].sc.pKa-pH));\n    }\n    for (var key in combined.basic) {\n        total+=combined.basic[key]/(1+Math.pow(10,pH-aaObject[key].sc.pKa));\n    }\n    return total;\n}\n\n// we will combine the amino acids\nfunction combine(aas) {\n    var combined={};\n    if (aaObject[aas[0]]) {\n        combined.first=aaObject[aas[0]].pKaN;\n    } else {\n        return;\n    }\n    if (aaObject[aas[aas.length-1]]) {\n        combined.last=aaObject[aas[aas.length-1]].pKaC;\n    } else {\n        return;\n    }\n    combined.basic={};\n    combined.acid={};\n    for (var i=0; i<aas.length; i++) {\n        var aa=aas[i];\n        if (! aaObject[aa]) return;\n        if (aaObject[aa].sc && aaObject[aa].sc.type) {\n            if (aaObject[aa].sc.type==\"positive\") {\n                if (!combined.basic[aa]) {\n                    combined.basic[aa] = 0;\n                }\n                combined.basic[aa]++;\n            } else if (aaObject[aa].sc.type==\"negative\") {\n                if (!combined.acid[aa]) {\n                    combined.acid[aa] = 0;\n                }\n                combined.acid[aa]++;\n            }\n        }\n    }\n    return combined;\n}\n\n/*\n We can generate a color based on iep\n 0 -> 7 means that at pH 7 it is charged negatively (blue)\n 7 -> 14 means that at pH7 it is charged positively (red)\n */\nfunction getColor(iep) {\n    if (iep<7) {\n        if (iep<3) iep=3;\n        var white=Math.round(255-(7-iep)*(200/4));\n        return \"rgb(\"+white+\",\"+white+\",255)\";\n    } else if (iep>7) {\n        if (iep>11) iep=11;\n        var white=Math.round(255-(iep-7)*(200/4));\n        return \"rgb(255,\"+white+\",\"+white+\")\";\n    }\n    return \"rgb(255,255,255)\";\n}\n\nmodule.exports={\n    calculateIEP: calculateIEP,\n    calculateCharge: calculateCharge,\n    calculateChart: calculateChart,\n    getColor: getColor\n}\n\n","'use strict';\n\nvar getAA = require('./getAA');\n\n// SOURCE: https://en.wikipedia.org/wiki/Amino_acid\n\nfunction chargePeptide(mf, options) {\n    var options=options || {};\n    if (options.pH === undefined) options.pH=0;\n    if (Array.isArray(mf)) {\n        for (var i=0; i<mf.length; i++) {\n            mf[i]=chargeOnePeptide(mf[i], options);\n        }\n        return mf;\n    } else {\n        return chargeOnePeptide(mf, options);\n    }\n}\n\nfunction chargeOnePeptide(mf, options) {\n    var pH=options.pH;\n    // we will allow to charge the peptide at a specific pH\n\n    // first amino acids (N-terminal)\n    if (mf.match(/^H[A-Z][a-z]{2}/)) {\n        var firstAA=mf.replace(/^H([A-Z][a-z]{2}).*/,\"$1\");\n        if (getAA(firstAA) && pH<getAA(firstAA).pKaN) {\n            mf=mf.replace(/^H([^+])/, 'H+H$1');\n        }\n    }\n\n    // last amino acids (C-terminal)\n    if (mf.match(/[A-Z][a-z]{2}OH$/)) {\n        var lastAA=mf.replace(/.*([A-Z][a-z]{2})OH$/,\"$1\");\n        if (getAA(firstAA) && pH>getAA(firstAA).pKaC) {\n            mf=mf.replace(/OH$/, 'O-');\n        }\n    }\n\n    // basic AA\n    if (pH < getAA('Arg').sc.pKa) mf=mf.replace(/(Arg)(?!\\()/g, '$1(H+)');\n    if (pH < getAA('His').sc.pKa) mf=mf.replace(/(His)(?!\\()/g, '$1(H+)');\n    if (pH < getAA('Lys').sc.pKa) mf=mf.replace(/(Lys)(?!\\()/g, '$1(H+)');\n\n    // acid AA\n    if (pH > getAA('Asp').sc.pKa) mf=mf.replace(/(Asp)(?!\\()/g, '$1(H-1-)');\n    if (pH > getAA('Glu').sc.pKa) mf=mf.replace(/(Glu)(?!\\()/g, '$1(H-1-)');\n\n    if (pH > getAA('Cys').sc.pKa) mf=mf.replace(/(Cys)(?!\\()/g, '$1(H-1-)');\n\n    return mf;\n};\n\nmodule.exports = chargePeptide;\n\n","'use strict';\n\nvar aa = require('./aminoAcids');\n\nfunction getAA(code) {\n    if (code.length===1) {\n        for (var i = 0; i < aa.length; i++) {\n            if (aa[i].aa1 === code) {\n                return aa[i];\n            }\n        }\n    }\n    if (code.length===3) {\n        for (var i = 0; i < aa.length; i++) {\n            if (aa[i].aa3 === code) {\n                return aa[i];\n            }\n        }\n    }\n}\n\nmodule.exports = getAA;","\nfunction allowNeutralLoss(mf, options) {\n    if (Array.isArray(mf)) {\n        for (var i=0; i<mf.length; i++) {\n            mf[i]=allowOneNeutralLoss(mf[i], options);\n        }\n        return mf;\n    } else {\n        return allowOneNeutralLoss(mf, options);\n    }\n}\n\nfunction allowOneNeutralLoss(mf, options) {\n    mf=mf.replace(/(Ser|Thr|Asp|Glu)(?!\\()/g, '$1(H-2O-1)0-1');\n    mf=mf.replace(/(Arg|Lys|Asn|Gln)(?!\\()/g, '$1(N-1H-3)0-1');\n\n    return mf;\n};\n\nmodule.exports = allowNeutralLoss;\n\n","'use strict';\n\nvar splitSequence = require('./splitPeptide');\n\n/*\nIotuibs:\n* minMissed (default: 0)\n* maxMissed (default: 0)\n* minResidue: 0;\n* maxResidue: infinity\n* enzyme: chymotrypsin, trypsin, glucph4, glucph8, thermolysin, cyanogenbromide : Mandatory, no default value !\n */\n\nfunction digestSequence(sequence, options) {\n  var options = options || {};\n\n  sequence = sequence.replace(/^H([^a-z])/, '$1').replace(/OH$/, '');\n\n  options.enzyme = options.enzyme || 'trypsin';\n  if (options.minMissed === undefined) options.minMissed = 0;\n  if (options.maxMissed === undefined) options.maxMissed = 0;\n  if (options.minResidue === undefined) options.minResidue = 0;\n  if (options.maxResidue === undefined) options.maxResidue = Number.MAX_VALUE;\n  var regexp = getRegexp(options.enzyme);\n  var fragments = sequence.replace(regexp, '$1 ').split(/ /);\n  if (!fragments[fragments.length - 1])\n    fragments = fragments.slice(0, fragments.length - 1);\n\n  var from = 0;\n  for (var i = 0; i < fragments.length; i++) {\n    var nbResidue = splitSequence(fragments[i]).length;\n    fragments[i] = {\n      sequence: fragments[i],\n      nbResidue: nbResidue,\n      from: from + 1,\n      to: from + nbResidue\n    };\n    from += nbResidue;\n  }\n\n  var results = [];\n\n  for (var i = 0; i < fragments.length - options.minMissed; i++) {\n    for (\n      var j = options.minMissed;\n      j <= Math.min(options.maxMissed, fragments.length - i - 1);\n      j++\n    ) {\n      var fragment = '';\n      var nbResidue = 0;\n      for (var k = i; k <= i + j; k++) {\n        fragment += fragments[k].sequence;\n        nbResidue += fragments[k].nbResidue;\n      }\n      var from = fragments[i].from;\n      var to = fragments[i + j].to;\n      if (\n        fragment &&\n        nbResidue >= options.minResidue &&\n        nbResidue <= options.maxResidue\n      ) {\n        results.push('H' + fragment + 'OH' + '$D' + from + '>' + to);\n      }\n    }\n  }\n\n  return results;\n}\n\nfunction getRegexp(enzyme) {\n  switch (enzyme.toLowerCase().replace(/[^a-z0-9]/g, '')) {\n    case 'chymotrypsin':\n      return /(Phe|Tyr|Trp)(?!Pro)/g;\n    case 'trypsin':\n      return /(Lys|Arg)(?!Pro)/g;\n    case 'lysc':\n      return /(Lys)(?!Pro)/g;\n    case 'glucph4':\n      return /(Glu)(?!Pro|Glu)/g;\n    case 'glucph8':\n      return /(Asp|Glu)(?!Pro|Glu)/g;\n    case 'thermolysin': // N-term of  Leu, Phe, Val, Ile, Ala, Met\n      return /()(?=Ile|Leu|Val|Ala|Met|Phe)/g;\n    case 'cyanogenbromide':\n      return /(Met)/g;\n  }\n  throw new Error('Digestion enzyme: ' + enzyme + ' is unknown');\n}\n\nmodule.exports = digestSequence;\n","'use strict';\n\nmodule.exports = function(mf, options) {\n    if (options === undefined) {\n        options = {\n            a: false,\n            b: true,\n            c: false,\n            x: false,\n            y: true,\n            z: false,\n            i: false,\n            ya: false,\n            yb: false,\n            yc: false,\n            zc: false\n        };\n    }\n    options.maxInternal = options.maxInternal || Number.MAX_VALUE;\n    options.minInternal = options.minInternal || 0;\n\n    var mfs = [];\n    // need to allow 0-9 to deal with neutral loss\n    var mfparts=mf.replace(/([a-z\\)0-9])([A-Z][a-z](?=[a-z]))/g,\"$1 $2\").split(/ /);\n\n    var nTerm=\"\";\n    var cTerm=\"\";\n\n    for (var i=1; i<mfparts.length; i++) {\n        nTerm+=mfparts[i-1];\n        cTerm=mfparts[mfparts.length-i]+cTerm;\n        addNTerm(mfs, nTerm, i, options);\n        addCTerm(mfs, cTerm, i, options);\n        if (options.i) mfs.push(mfparts[i]+\"HC-1O-1(+1)$i:\"+mfparts[i]);\n\n        if (options.ya || options.yb || options.yc || options.zc) { // we have double fragmentations\n            for (var j=i+1; j<Math.min(mfparts.length,options.maxInternal+i+1);j++) {\n                var iTerm='';\n                if ((j-i)>=options.minInternal) {\n                    for (var k = i; k < j; k++) {\n                        iTerm += mfparts[k];\n                    }\n                    addITerm(mfs, iTerm, mfparts.length - i, j, options);\n                }\n            }\n        }\n    }\n\n    if (mfs.length === 0) {\n        mfs = mfs.concat([mf]);\n    }\n\n    return mfs;\n\n};\n\nfunction addNTerm(mfs, nTerm, i, options) {\n    if (options.a) mfs.push(nTerm+\"C-1O-1(+1)$a\"+i);\n    if (options.b) mfs.push(nTerm+\"(+1)$b\"+i);\n    if (options.c) mfs.push(nTerm+\"NH3(+1)$c\"+i);\n}\n\nfunction addITerm(mfs, iTerm, i, j, options) {\n    if (options.ya) mfs.push(\"H\"+iTerm+\"C-1O-1(+1)$a\"+j+\"y\"+i);\n    if (options.yb) mfs.push(\"H\"+iTerm+\"(+1)$b\"+j+\"y\"+i);\n    if (options.yc) mfs.push(\"H\"+iTerm+\"NH3(+1)$c\"+j+\"y\"+i);\n    if (options.zc) mfs.push(\"N-1\"+iTerm+\"NH3(+1)$c\"+j+\"z\"+i);\n}\n\nfunction addCTerm(mfs, cTerm, i, options) {\n    if (options.x) mfs.push(\"CO(+1)\"+cTerm+\"$x\"+i);\n    if (options.y) mfs.push(\"H2(+1)\"+cTerm+\"$y\"+i);\n    if (options.z) mfs.push(\"N-1H-1(+1)\"+cTerm+\"$z\"+i);\n}\n"],"sourceRoot":""}