{"version":3,"sources":["webpack://Peptide/webpack/universalModuleDefinition","webpack://Peptide/webpack/bootstrap","webpack://Peptide/./src/aminoAcids.js","webpack://Peptide/./src/splitPeptide.js","webpack://Peptide/./src/index.js","webpack://Peptide/./src/isoElectricPoint.js","webpack://Peptide/./src/chargePeptide.js","webpack://Peptide/./src/getAA.js","webpack://Peptide/./src/allowNeutralLoss.js","webpack://Peptide/./src/digestPeptide.js","webpack://Peptide/./src/generatePeptideFragments.js","webpack://Peptide/./src/convertAASequence.js"],"names":["module","exports","name","aa3","aa1","sc","type","pKaC","pKaN","pKa","splitSequence","sequence","aas","replace","split","begin","end","length","slice","aa","require","IEP","chargePeptide","allowNeutralLoss","splitPeptide","digestPeptide","generatePeptideFragments","convertAASequence","getInfo","calculateIEP","result","calculateIEPChart","calculateChart","getColorForIEP","iep","getColor","calculateCharge","ph","capitalizeAA3","mf","i","regexp","RegExp","sequenceToMF","aaObject","pH","combined","combine","charge","calculateForPh","Math","round","first","last","current","previous","currentCharge","abs","y","x","yAbs","push","total","pow","key","acid","basic","white","getAA","options","undefined","Array","isArray","chargeOnePeptide","match","firstAA","lastAA","code","allowOneNeutralLoss","digestSequence","enzyme","minMissed","maxMissed","minResidue","maxResidue","Number","MAX_VALUE","getRegexp","fragments","filter","entry","from","nbResidue","to","results","j","min","fragment","k","toLowerCase","Error","a","b","c","z","ya","yb","yc","zc","maxInternal","minInternal","mfs","mfparts","nTerm","cTerm","addNTerm","addCTerm","iTerm","addITerm","concat","newMF","search","tmpmf","parts","substr","includes","nTerminal","cTerminal","parenthesisCounter","currentSymbol","convertAA1To3","newmf","aa1To3","charAt"],"mappings":"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","file":"peptide.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Peptide\"] = factory();\n\telse\n\t\troot[\"Peptide\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","'use strict';\n\n// SOURCE: https://en.wikipedia.org/wiki/Amino_acid\nmodule.exports = [\n    // Standard amino acids\n    {\n        name: \"Alanine\",\n        aa3: \"Ala\",\n        aa1: \"A\",\n        sc: {\n            type: \"hydrophobic\"\n        },\n        pKaC: 2.33,\n        pKaN: 9.71\n    },\n    {\n        name: \"Arginine\",\n        aa3: \"Arg\",\n        aa1: \"R\",\n        sc: {\n            type: \"positive\",\n            pKa: 12.10\n        },\n        pKaC: 2.03,\n        pKaN: 9.00\n    },\n    {\n        name: \"Asparagine\",\n        aa3: \"Asn\",\n        aa1: \"N\",\n        sc: {\n            type: \"polar\"\n        },\n        pKaC: 2.13,\n        pKaN: 9.05\n    },\n    {\n        name: \"Aspartic acid\",\n        aa3: \"Asp\",\n        aa1: \"D\",\n        sc: {\n            type: \"negative\",\n            pKa: 3.71\n        },\n        pKaC: 1.95,\n        pKaN: 9.66\n    },\n    {\n        name: \"Cysteine\",\n        aa3: \"Cys\",\n        aa1: \"C\",\n        sc: {\n            type: \"special\",\n            pKa: 8.14\n        },\n        pKaC: 1.91,\n        pKaN: 10.28\n    },\n    {\n        name: \"Glutamic acid\",\n        aa3: \"Glu\",\n        aa1: \"E\",\n        sc: {\n            type: \"negative\",\n            pKa: 4.15\n        },\n        pKaC: 2.16,\n        pKaN: 9.58\n    },\n    {\n        name: \"Glutamine\",\n        aa3: \"Gln\",\n        aa1: \"Q\",\n        sc: {\n            type: \"polar\"\n        },\n        pKaC: 2.18,\n        pKaN: 9.00\n    },\n    {\n        name: \"Glycine\",\n        aa3: \"Gly\",\n        aa1: \"G\",\n        sc: {\n            type: \"special\"\n        },\n        pKaC: 2.34,\n        pKaN: 9.58\n    },\n    {\n        name: \"Histidine\",\n        aa3: \"His\",\n        aa1: \"H\",\n        sc: {\n            type: \"positive\",\n            pKa: 6.04\n        },\n        pKaC: 1.70,\n        pKaN: 9.09\n    },\n    {\n        name: \"Isoleucine\",\n        aa3: \"Ile\",\n        aa1: \"I\",\n        sc: {\n            type: \"hydrophobic\"\n        },\n        pKaC: 2.26,\n        pKaN: 9.60\n    },\n    {\n        name: \"Leucine\",\n        aa3: \"Leu\",\n        aa1: \"L\",\n        sc: {\n            type: \"hydrophobic\"\n        },\n        pKaC: 2.32,\n        pKaN: 9.58\n    },\n    {\n        name: \"Lysine\",\n        aa3: \"Lys\",\n        aa1: \"K\",\n        sc: {\n            type: \"positive\",\n            pKa: 10.67\n        },\n        pKaC: 2.15,\n        pKaN: 9.16\n    },\n    {\n        name: \"Methionine\",\n        aa3: \"Met\",\n        aa1: \"M\",\n        sc: {\n            type: \"hydrophobic\"\n        },\n        pKaC: 2.16,\n        pKaN: 9.08\n    },\n    {\n        name: \"Phenylalanine\",\n        aa3: \"Phe\",\n        aa1: \"F\",\n        sc: {\n            type: \"hydrophobic\"\n        },\n        pKaC: 2.18,\n        pKaN: 9.09\n    },\n    {\n        name: \"Proline\",\n        aa3: \"Pro\",\n        aa1: \"P\",\n        sc: {\n            type: \"special\"\n        },\n        pKaC: 1.95,\n        pKaN: 10.47\n    },\n    {\n        name: \"Serine\",\n        aa3: \"Ser\",\n        aa1: \"S\",\n        sc: {\n            type: \"polar\"\n        },\n        pKaC: 2.13,\n        pKaN: 9.05\n    },\n    {\n        name: \"Threonine\",\n        aa3: \"Thr\",\n        aa1: \"T\",\n        sc: {\n            type: \"polar\"\n        },\n        pKaC: 2.20,\n        pKaN: 8.96\n    },\n    {\n        name: \"Tryptophan\",\n        aa3: \"Trp\",\n        aa1: \"W\",\n        sc: {\n            type: \"hydrophobic\"\n        },\n        pKaC: 2.38,\n        pKaN: 9.34\n    },\n    {\n        name: \"Tyrosine\",\n        aa3: \"Tyr\",\n        aa1: \"Y\",\n        sc: {\n            type: \"hydrophobic\"\n        },\n        pKaC: 2.24,\n        pKaN: 9.04\n    },\n    {\n        name: \"Valine\",\n        aa3: \"Val\",\n        aa1: \"V\",\n        sc: {\n            type: \"hydrophobic\"\n        },\n        pKaC: 2.27,\n        pKaN: 9.52\n    },\n    // Additional\n    {\n        name: \"Selenocysteine\",\n        aa3: \"Sec\",\n        aa1: \"U\"\n    },\n    {\n        name: \"Pyrrolysine\",\n        aa3: \"Pyl\",\n        aa1: \"O\"\n    },\n    // Ambiguous\n    {\n        name: \"Asparagine or aspartic acid\",\n        aa3: \"Asx\",\n        aa1: \"B\"\n    },\n    {\n        name: \"Glutamine or glutamic acid\",\n        aa3: \"Glx\",\n        aa1: \"Z\"\n    },\n    {\n        name: \"Leucine or isoleucine\",\n        aa3: \"Xle\",\n        aa1: \"J\"\n    },\n    {\n        name: \"Unspecified or unknown\",\n        aa3: \"Xaa\",\n        aa1: \"X\"\n    }\n];\n","'use strict';\n\nfunction splitSequence(sequence) {\n  var aas = sequence.replace(/([A-Z])/g, ' $1').split(/ /);\n  var begin = 0;\n  while (aas[begin] === '' || aas[begin] === 'H') {\n    begin++;\n  }\n  var end = aas.length - 1;\n  while (aas[end] === 'O' || aas[end] === 'H') {\n    end--;\n  }\n  aas = aas.slice(begin, end + 1);\n  return aas;\n}\n\nmodule.exports = splitSequence;\n","'use strict';\n\nconst aa = require('./aminoAcids');\nconst IEP = require('./isoElectricPoint');\nconst chargePeptide = require('./chargePeptide');\nconst allowNeutralLoss = require('./allowNeutralLoss');\nconst splitPeptide = require('./splitPeptide');\nconst digestPeptide = require('./digestPeptide');\nconst generatePeptideFragments = require('./generatePeptideFragments');\nconst convertAASequence = require('./convertAASequence');\n\nexports.getInfo = function() {\n  return aa;\n};\n\n// sequence should be in the \"right\" format like HAlaGlyProOH\n\nexports.splitPeptide = splitPeptide;\nexports.digestPeptide = digestPeptide;\n\nexports.calculateIEP = function(sequence) {\n  var aas = splitPeptide(sequence);\n  var result = IEP.calculateIEP(aas);\n  return result;\n};\n\nexports.calculateIEPChart = function(sequence) {\n  var aas = splitPeptide(sequence);\n  var result = IEP.calculateChart(aas);\n  return result;\n};\n\nexports.getColorForIEP = function(iep) {\n  return IEP.getColor(iep);\n};\n\nexports.calculateCharge = function(sequence, ph) {\n  var aas = splitPeptide(sequence);\n  return IEP.calculateCharge(aas, ph);\n};\n\nexports.generatePeptideFragments = generatePeptideFragments;\n\nexports.chargePeptide = chargePeptide;\nexports.allowNeutralLoss = allowNeutralLoss;\n\nfunction capitalizeAA3(mf) {\n  for (var i = 0; i < aa.length; i++) {\n    var regexp = new RegExp(aa[i].aa3, 'gi');\n    mf = mf.replace(regexp, aa[i].aa3);\n  }\n  return mf;\n}\n\nexports.convertAASequence = convertAASequence;\n\nexports.sequenceToMF = convertAASequence;\n","'use strict';\n\n\nvar aa = require('./aminoAcids');\n\n// we will convert the data to an object to be much faster\nvar aaObject={};\nfor (var i=0; i<aa.length; i++) {\n    aaObject[aa[i].aa3]=aa[i];\n}\n\n\n\nfunction calculateCharge(aas, pH) {\n    if (! pH) pH=7.0;\n    var combined=combine(aas);\n    if (!combined) return;\n    var charge=calculateForPh(combined, pH);\n    return Math.round(charge*1000)/1000;\n}\n\n// this methods required an array of aas\n\nfunction calculateIEP(aas) {\n    var combined=combine(aas);\n    if (!combined) return;\n    var first=0;\n    var last=14;\n    var current=14;\n    var previous=0;\n    var currentCharge;\n    while (Math.abs(current-previous)>0.0001) {\n        previous=current;\n        current=(last + first) / 2;\n        currentCharge=calculateForPh(combined, current);\n        if (currentCharge>0) {\n            first=current;\n        } else if (currentCharge<0) {\n            last=current;\n        } else {\n            previous=current;\n        }\n    }\n    return Math.round(current*1000)/1000;\n}\n\nfunction calculateChart(aas) {\n    var combined=combine(aas);\n    if (!combined) return;\n    var y=[];\n    var x=[];\n    var yAbs=[];\n    for (var i=0; i<=14; i=i+0.01) {\n        var charge=calculateForPh(combined, i);\n        x.push(i);\n        y.push(charge);\n        yAbs.push(Math.abs(charge));\n    }\n    combined.x=x;\n    combined.y=y;\n    combined.yAbs=yAbs;\n\n    return combined;\n}\n\n\nfunction calculateForPh(combined, pH) {\n    var total=0;\n    total+=1/(1+Math.pow(10,pH-combined.first));\n    total+=-1/(1+Math.pow(10,combined.last-pH));\n    for (var key in combined.acid) {\n        total+=-combined.acid[key]/(1+Math.pow(10,aaObject[key].sc.pKa-pH));\n    }\n    for (var key in combined.basic) {\n        total+=combined.basic[key]/(1+Math.pow(10,pH-aaObject[key].sc.pKa));\n    }\n    return total;\n}\n\n// we will combine the amino acids\nfunction combine(aas) {\n    var combined={};\n    if (aaObject[aas[0]]) {\n        combined.first=aaObject[aas[0]].pKaN;\n    } else {\n        return;\n    }\n    if (aaObject[aas[aas.length-1]]) {\n        combined.last=aaObject[aas[aas.length-1]].pKaC;\n    } else {\n        return;\n    }\n    combined.basic={};\n    combined.acid={};\n    for (var i=0; i<aas.length; i++) {\n        var aa=aas[i];\n        if (! aaObject[aa]) return;\n        if (aaObject[aa].sc && aaObject[aa].sc.type) {\n            if (aaObject[aa].sc.type==\"positive\") {\n                if (!combined.basic[aa]) {\n                    combined.basic[aa] = 0;\n                }\n                combined.basic[aa]++;\n            } else if (aaObject[aa].sc.type==\"negative\") {\n                if (!combined.acid[aa]) {\n                    combined.acid[aa] = 0;\n                }\n                combined.acid[aa]++;\n            }\n        }\n    }\n    return combined;\n}\n\n/*\n We can generate a color based on iep\n 0 -> 7 means that at pH 7 it is charged negatively (blue)\n 7 -> 14 means that at pH7 it is charged positively (red)\n */\nfunction getColor(iep) {\n    if (iep<7) {\n        if (iep<3) iep=3;\n        var white=Math.round(255-(7-iep)*(200/4));\n        return \"rgb(\"+white+\",\"+white+\",255)\";\n    } else if (iep>7) {\n        if (iep>11) iep=11;\n        var white=Math.round(255-(iep-7)*(200/4));\n        return \"rgb(255,\"+white+\",\"+white+\")\";\n    }\n    return \"rgb(255,255,255)\";\n}\n\nmodule.exports={\n    calculateIEP: calculateIEP,\n    calculateCharge: calculateCharge,\n    calculateChart: calculateChart,\n    getColor: getColor\n}\n\n","'use strict';\n\nvar getAA = require('./getAA');\n\n// SOURCE: https://en.wikipedia.org/wiki/Amino_acid\n\nfunction chargePeptide(mf, options) {\n    var options=options || {};\n    if (options.pH === undefined) options.pH=0;\n    if (Array.isArray(mf)) {\n        for (var i=0; i<mf.length; i++) {\n            mf[i]=chargeOnePeptide(mf[i], options);\n        }\n        return mf;\n    } else {\n        return chargeOnePeptide(mf, options);\n    }\n}\n\nfunction chargeOnePeptide(mf, options) {\n    var pH=options.pH;\n    // we will allow to charge the peptide at a specific pH\n\n    // first amino acids (N-terminal)\n    if (mf.match(/^H[A-Z][a-z]{2}/)) {\n        var firstAA=mf.replace(/^H([A-Z][a-z]{2}).*/,\"$1\");\n        if (getAA(firstAA) && pH<getAA(firstAA).pKaN) {\n            mf=mf.replace(/^H([^+])/, 'H+H$1');\n        }\n    }\n\n    // last amino acids (C-terminal)\n    if (mf.match(/[A-Z][a-z]{2}OH$/)) {\n        var lastAA=mf.replace(/.*([A-Z][a-z]{2})OH$/,\"$1\");\n        if (getAA(firstAA) && pH>getAA(firstAA).pKaC) {\n            mf=mf.replace(/OH$/, 'O-');\n        }\n    }\n\n    // basic AA\n    if (pH < getAA('Arg').sc.pKa) mf=mf.replace(/(Arg)(?!\\()/g, '$1(H+)');\n    if (pH < getAA('His').sc.pKa) mf=mf.replace(/(His)(?!\\()/g, '$1(H+)');\n    if (pH < getAA('Lys').sc.pKa) mf=mf.replace(/(Lys)(?!\\()/g, '$1(H+)');\n\n    // acid AA\n    if (pH > getAA('Asp').sc.pKa) mf=mf.replace(/(Asp)(?!\\()/g, '$1(H-1-)');\n    if (pH > getAA('Glu').sc.pKa) mf=mf.replace(/(Glu)(?!\\()/g, '$1(H-1-)');\n\n    if (pH > getAA('Cys').sc.pKa) mf=mf.replace(/(Cys)(?!\\()/g, '$1(H-1-)');\n\n    return mf;\n};\n\nmodule.exports = chargePeptide;\n\n","'use strict';\n\nvar aa = require('./aminoAcids');\n\nfunction getAA(code) {\n    if (code.length===1) {\n        for (var i = 0; i < aa.length; i++) {\n            if (aa[i].aa1 === code) {\n                return aa[i];\n            }\n        }\n    }\n    if (code.length===3) {\n        for (var i = 0; i < aa.length; i++) {\n            if (aa[i].aa3 === code) {\n                return aa[i];\n            }\n        }\n    }\n}\n\nmodule.exports = getAA;","\nfunction allowNeutralLoss(mf, options) {\n    if (Array.isArray(mf)) {\n        for (var i=0; i<mf.length; i++) {\n            mf[i]=allowOneNeutralLoss(mf[i], options);\n        }\n        return mf;\n    } else {\n        return allowOneNeutralLoss(mf, options);\n    }\n}\n\nfunction allowOneNeutralLoss(mf, options) {\n    mf=mf.replace(/(Ser|Thr|Asp|Glu)(?!\\()/g, '$1(H-2O-1)0-1');\n    mf=mf.replace(/(Arg|Lys|Asn|Gln)(?!\\()/g, '$1(N-1H-3)0-1');\n\n    return mf;\n};\n\nmodule.exports = allowNeutralLoss;\n\n","'use strict';\n\nvar splitSequence = require('./splitPeptide');\n\n/*\nIotuibs:\n* minMissed (default: 0)\n* maxMissed (default: 0)\n* minResidue: 0;\n* maxResidue: infinity\n* enzyme: chymotrypsin, trypsin, glucph4, glucph8, thermolysin, cyanogenbromide : Mandatory, no default value !\n */\n\nfunction digestSequence(sequence, options) {\n  var options = options || {};\n\n  sequence = sequence.replace(/^H([^a-z])/, '$1').replace(/OH$/, '');\n\n  options.enzyme = options.enzyme || 'trypsin';\n  if (options.minMissed === undefined) options.minMissed = 0;\n  if (options.maxMissed === undefined) options.maxMissed = 0;\n  if (options.minResidue === undefined) options.minResidue = 0;\n  if (options.maxResidue === undefined) options.maxResidue = Number.MAX_VALUE;\n  var regexp = getRegexp(options.enzyme);\n  var fragments = sequence\n    .replace(regexp, '$1 ')\n    .split(/ /)\n    .filter(entry => entry);\n\n  var from = 0;\n  for (var i = 0; i < fragments.length; i++) {\n    var nbResidue = fragments[i]\n      .replace(/([A-Z][a-z][a-z])/g, ' $1')\n      .split(/ /)\n      .filter(entry => entry).length;\n    fragments[i] = {\n      sequence: fragments[i],\n      nbResidue: nbResidue,\n      from: from,\n      to: from + nbResidue - 1\n    };\n    from += nbResidue;\n  }\n\n  var results = [];\n\n  for (var i = 0; i < fragments.length - options.minMissed; i++) {\n    for (\n      var j = options.minMissed;\n      j <= Math.min(options.maxMissed, fragments.length - i - 1);\n      j++\n    ) {\n      var fragment = '';\n      var nbResidue = 0;\n      for (var k = i; k <= i + j; k++) {\n        fragment += fragments[k].sequence;\n        nbResidue += fragments[k].nbResidue;\n      }\n      var from = fragments[i].from + 1;\n      var to = fragments[i + j].to + 1;\n      if (\n        fragment &&\n        nbResidue >= options.minResidue &&\n        nbResidue <= options.maxResidue\n      ) {\n        results.push('H' + fragment + 'OH' + '$D' + from + '>' + to);\n      }\n    }\n  }\n\n  return results;\n}\n\nfunction getRegexp(enzyme) {\n  switch (enzyme.toLowerCase().replace(/[^a-z0-9]/g, '')) {\n    case 'chymotrypsin':\n      return /(Phe|Tyr|Trp)(?!Pro)/g;\n    case 'trypsin':\n      return /(Lys|Arg)(?!Pro)/g;\n    case 'lysc':\n      return /(Lys)(?!Pro)/g;\n    case 'glucph4':\n      return /(Glu)(?!Pro|Glu)/g;\n    case 'glucph8':\n      return /(Asp|Glu)(?!Pro|Glu)/g;\n    case 'thermolysin': // N-term of  Leu, Phe, Val, Ile, Ala, Met\n      return /()(?=Ile|Leu|Val|Ala|Met|Phe)/g;\n    case 'cyanogenbromide':\n      return /(Met)/g;\n    case 'any':\n      return /()(?=[A-Z][a-z][a-z])/g;\n  }\n  throw new Error('Digestion enzyme: ' + enzyme + ' is unknown');\n}\n\nmodule.exports = digestSequence;\n","'use strict';\n\nmodule.exports = function(mf, options) {\n    if (options === undefined) {\n        options = {\n            a: false,\n            b: true,\n            c: false,\n            x: false,\n            y: true,\n            z: false,\n            i: false,\n            ya: false,\n            yb: false,\n            yc: false,\n            zc: false\n        };\n    }\n    options.maxInternal = options.maxInternal || Number.MAX_VALUE;\n    options.minInternal = options.minInternal || 0;\n\n    var mfs = [];\n    // need to allow 0-9 to deal with neutral loss\n    var mfparts=mf.replace(/([a-z\\)0-9])([A-Z][a-z](?=[a-z]))/g,\"$1 $2\").split(/ /);\n\n    var nTerm=\"\";\n    var cTerm=\"\";\n\n    for (var i=1; i<mfparts.length; i++) {\n        nTerm+=mfparts[i-1];\n        cTerm=mfparts[mfparts.length-i]+cTerm;\n        addNTerm(mfs, nTerm, i, options);\n        addCTerm(mfs, cTerm, i, options);\n        if (options.i) mfs.push(mfparts[i]+\"HC-1O-1(+1)$i:\"+mfparts[i]);\n\n        if (options.ya || options.yb || options.yc || options.zc) { // we have double fragmentations\n            for (var j=i+1; j<Math.min(mfparts.length,options.maxInternal+i+1);j++) {\n                var iTerm='';\n                if ((j-i)>=options.minInternal) {\n                    for (var k = i; k < j; k++) {\n                        iTerm += mfparts[k];\n                    }\n                    addITerm(mfs, iTerm, mfparts.length - i, j, options);\n                }\n            }\n        }\n    }\n\n    if (mfs.length === 0) {\n        mfs = mfs.concat([mf]);\n    }\n\n    return mfs;\n\n};\n\nfunction addNTerm(mfs, nTerm, i, options) {\n    if (options.a) mfs.push(nTerm+\"C-1O-1(+1)$a\"+i);\n    if (options.b) mfs.push(nTerm+\"(+1)$b\"+i);\n    if (options.c) mfs.push(nTerm+\"NH3(+1)$c\"+i);\n}\n\nfunction addITerm(mfs, iTerm, i, j, options) {\n    if (options.ya) mfs.push(\"H\"+iTerm+\"C-1O-1(+1)$a\"+j+\"y\"+i);\n    if (options.yb) mfs.push(\"H\"+iTerm+\"(+1)$b\"+j+\"y\"+i);\n    if (options.yc) mfs.push(\"H\"+iTerm+\"NH3(+1)$c\"+j+\"y\"+i);\n    if (options.zc) mfs.push(\"N-1\"+iTerm+\"NH3(+1)$c\"+j+\"z\"+i);\n}\n\nfunction addCTerm(mfs, cTerm, i, options) {\n    if (options.x) mfs.push(\"CO(+1)\"+cTerm+\"$x\"+i);\n    if (options.y) mfs.push(\"H2(+1)\"+cTerm+\"$y\"+i);\n    if (options.z) mfs.push(\"N-1H-1(+1)\"+cTerm+\"$z\"+i);\n}\n","'use strict';\n\nconst aa = require('./aminoAcids');\n\nfunction convertAASequence(mf) {\n  // this function will check if it is a sequence of aa in 1 letter or 3 letters and convert them if it is the case\n  // it could be a multiline mf !\n  // if it is a multiline we could make some \"tricks\" ...\n  var newMF = mf;\n  // SEQRES   1 B  256  MET PRO VAL GLU ILE THR VAL LYS GLU LEU LEU GLU ALA\n  // SEQRES   2 B  256  GLY VAL HIS PHE GLY HIS GLU ARG LYS ARG TRP ASN PRO\n  // or\n  // MET PRO VAL GLU ILE THR VAL LYS GLU LEU LEU GLU ALA\n  // GLY VAL HIS PHE GLY HIS GLU ARG LYS ARG TRP ASN PRO\n  if (mf.search(/[A-Z]{3} [A-Z]{3} [A-Z]{3}/) > -1) {\n    // this is a PDB !\n    var tmpmf = mf.replace(/[\\r\\n]+/g, ' ');\n    tmpmf = tmpmf.replace(/(SEQRES|[0-9]+| [A-Z] | [0-9A-Z]{4-50})/g, '');\n    // we need to correct the uppercase / lowercase\n    var parts = tmpmf.split(' ');\n    newMF = 'H';\n    for (var i = 0; i < parts.length; i++) {\n      newMF += parts[i].substr(0, 1) + parts[i].substr(1).toLowerCase();\n    }\n    newMF += 'OH';\n  } else if (mf.includes('(')) {\n    // we expect one letter code with modification\n    newMF = '';\n    let nTerminal = 'H';\n    let cTerminal = 'OH';\n    let parenthesisCounter = 0;\n    for (let i = 0; i < mf.length; i++) {\n      let currentSymbol = mf[i];\n      if (\n        currentSymbol === '(' ||\n        currentSymbol === ')' ||\n        parenthesisCounter > 0\n      ) {\n        if (currentSymbol === '(') {\n          parenthesisCounter++;\n          if (i === 0) nTerminal = '';\n        }\n        if (currentSymbol === ')') {\n          parenthesisCounter--;\n          if (i === mf.length - 1) cTerminal = '';\n        }\n        newMF += currentSymbol;\n        continue;\n      }\n      newMF += convertAA1To3(currentSymbol);\n    }\n    newMF = nTerminal + newMF + cTerminal;\n  } else if (\n    mf.search(/[A-Z]{3}/) > -1 &&\n    mf.search(/[a-zA-Z][a-z0-9]/) == -1\n  ) {\n    // UNIPROT\n    //   370        380        390        400        410        420\n    //GFKPNLRKTF VSGLFRESCG AHFYRGVDVK PFYIKKPVDN LFALMLILNR LRGWGVVGGM\n    //\n    //    430        440        450        460        470        480\n    //SDPRLYKVWV RLSSQVPSMF FGGTDLAADY YVVSPPTAVS VYTKTPYGRL LADTRTSGFR\n    // We remove all the number, all the spaces, etc\n    newMF = 'H' + convertAA1To3(newMF.replace(/[^A-Z]/g, '')) + 'OH';\n  }\n\n  return newMF;\n}\n\nfunction convertAA1To3(mf) {\n  var newmf = '';\n  for (var i = 0; i < mf.length; i++) {\n    newmf += aa1To3(mf.charAt(i));\n  }\n  return newmf;\n}\n\nfunction aa1To3(code) {\n  for (var i = 0; i < aa.length; i++) {\n    if (aa[i].aa1 === code) {\n      return aa[i].aa3;\n    }\n  }\n  throw new Error('Invalid 1 letter code: ' + code);\n}\n\nmodule.exports = convertAASequence;\n"],"sourceRoot":""}