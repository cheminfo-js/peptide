{"version":3,"sources":["webpack://Peptide/webpack/universalModuleDefinition","webpack://Peptide/webpack/bootstrap","webpack://Peptide/./src/aminoAcids.js","webpack://Peptide/./src/index.js","webpack://Peptide/./src/isoElectricPoint.js","webpack://Peptide/./src/chargePeptide.js","webpack://Peptide/./src/getAA.js","webpack://Peptide/./src/allowNeutralLoss.js","webpack://Peptide/./src/splitPeptide.js","webpack://Peptide/./src/digestPeptide.js","webpack://Peptide/./src/generatePeptideFragments.js","webpack://Peptide/./src/convertAASequence.js"],"names":["module","exports","name","aa3","aa1","sc","type","pKaC","pKaN","pKa","aa","require","IEP","chargePeptide","allowNeutralLoss","splitPeptide","digestPeptide","generatePeptideFragments","convertAASequence","getInfo","calculateIEP","sequence","aas","result","calculateIEPChart","calculateChart","getColorForIEP","iep","getColor","calculateCharge","ph","sequenceToMF","aaObject","i","length","pH","combined","combine","charge","calculateForPh","Math","round","first","last","current","previous","currentCharge","abs","y","x","yAbs","push","total","pow","key","acid","basic","white","getAA","mf","options","undefined","Array","isArray","chargeOnePeptide","match","firstAA","replace","lastAA","code","allowOneNeutralLoss","splitSequence","split","begin","end","slice","digestSequence","enzyme","minMissed","maxMissed","minResidue","maxResidue","Number","MAX_VALUE","regexp","getRegexp","fragments","filter","entry","from","nbResidue","to","results","j","min","fragment","k","toLowerCase","Error","a","b","c","z","ya","yb","yc","zc","maxInternal","minInternal","mfs","mfparts","nTerm","cTerm","addNTerm","addCTerm","iTerm","addITerm","concat","newMF","search","tmpmf","parts","substr","includes","nTerminal","cTerminal","parenthesisCounter","currentSymbol","convertAA1To3","newmf","aa1To3","charAt"],"mappings":"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","file":"peptide.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Peptide\"] = factory();\n\telse\n\t\troot[\"Peptide\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","'use strict';\n\n// SOURCE: https://en.wikipedia.org/wiki/Amino_acid\nmodule.exports = [\n  // Standard amino acids\n  {\n    name: 'Alanine',\n    aa3: 'Ala',\n    aa1: 'A',\n    sc: {\n      type: 'hydrophobic',\n    },\n    pKaC: 2.33,\n    pKaN: 9.71,\n  },\n  {\n    name: 'Arginine',\n    aa3: 'Arg',\n    aa1: 'R',\n    sc: {\n      type: 'positive',\n      pKa: 12.1,\n    },\n    pKaC: 2.03,\n    pKaN: 9.0,\n  },\n  {\n    name: 'Asparagine',\n    aa3: 'Asn',\n    aa1: 'N',\n    sc: {\n      type: 'polar',\n    },\n    pKaC: 2.13,\n    pKaN: 9.05,\n  },\n  {\n    name: 'Aspartic acid',\n    aa3: 'Asp',\n    aa1: 'D',\n    sc: {\n      type: 'negative',\n      pKa: 3.71,\n    },\n    pKaC: 1.95,\n    pKaN: 9.66,\n  },\n  {\n    name: 'Cysteine',\n    aa3: 'Cys',\n    aa1: 'C',\n    sc: {\n      type: 'special',\n      pKa: 8.14,\n    },\n    pKaC: 1.91,\n    pKaN: 10.28,\n  },\n  {\n    name: 'Glutamic acid',\n    aa3: 'Glu',\n    aa1: 'E',\n    sc: {\n      type: 'negative',\n      pKa: 4.15,\n    },\n    pKaC: 2.16,\n    pKaN: 9.58,\n  },\n  {\n    name: 'Glutamine',\n    aa3: 'Gln',\n    aa1: 'Q',\n    sc: {\n      type: 'polar',\n    },\n    pKaC: 2.18,\n    pKaN: 9.0,\n  },\n  {\n    name: 'Glycine',\n    aa3: 'Gly',\n    aa1: 'G',\n    sc: {\n      type: 'special',\n    },\n    pKaC: 2.34,\n    pKaN: 9.58,\n  },\n  {\n    name: 'Histidine',\n    aa3: 'His',\n    aa1: 'H',\n    sc: {\n      type: 'positive',\n      pKa: 6.04,\n    },\n    pKaC: 1.7,\n    pKaN: 9.09,\n  },\n  {\n    name: 'Isoleucine',\n    aa3: 'Ile',\n    aa1: 'I',\n    sc: {\n      type: 'hydrophobic',\n    },\n    pKaC: 2.26,\n    pKaN: 9.6,\n  },\n  {\n    name: 'Leucine',\n    aa3: 'Leu',\n    aa1: 'L',\n    sc: {\n      type: 'hydrophobic',\n    },\n    pKaC: 2.32,\n    pKaN: 9.58,\n  },\n  {\n    name: 'Lysine',\n    aa3: 'Lys',\n    aa1: 'K',\n    sc: {\n      type: 'positive',\n      pKa: 10.67,\n    },\n    pKaC: 2.15,\n    pKaN: 9.16,\n  },\n  {\n    name: 'Methionine',\n    aa3: 'Met',\n    aa1: 'M',\n    sc: {\n      type: 'hydrophobic',\n    },\n    pKaC: 2.16,\n    pKaN: 9.08,\n  },\n  {\n    name: 'Phenylalanine',\n    aa3: 'Phe',\n    aa1: 'F',\n    sc: {\n      type: 'hydrophobic',\n    },\n    pKaC: 2.18,\n    pKaN: 9.09,\n  },\n  {\n    name: 'Proline',\n    aa3: 'Pro',\n    aa1: 'P',\n    sc: {\n      type: 'special',\n    },\n    pKaC: 1.95,\n    pKaN: 10.47,\n  },\n  {\n    name: 'Serine',\n    aa3: 'Ser',\n    aa1: 'S',\n    sc: {\n      type: 'polar',\n    },\n    pKaC: 2.13,\n    pKaN: 9.05,\n  },\n  {\n    name: 'Threonine',\n    aa3: 'Thr',\n    aa1: 'T',\n    sc: {\n      type: 'polar',\n    },\n    pKaC: 2.2,\n    pKaN: 8.96,\n  },\n  {\n    name: 'Tryptophan',\n    aa3: 'Trp',\n    aa1: 'W',\n    sc: {\n      type: 'hydrophobic',\n    },\n    pKaC: 2.38,\n    pKaN: 9.34,\n  },\n  {\n    name: 'Tyrosine',\n    aa3: 'Tyr',\n    aa1: 'Y',\n    sc: {\n      type: 'hydrophobic',\n    },\n    pKaC: 2.24,\n    pKaN: 9.04,\n  },\n  {\n    name: 'Valine',\n    aa3: 'Val',\n    aa1: 'V',\n    sc: {\n      type: 'hydrophobic',\n    },\n    pKaC: 2.27,\n    pKaN: 9.52,\n  },\n  // Additional\n  {\n    name: 'Selenocysteine',\n    aa3: 'Sec',\n    aa1: 'U',\n  },\n  {\n    name: 'Pyrrolysine',\n    aa3: 'Pyl',\n    aa1: 'O',\n  },\n  // Ambiguous\n  {\n    name: 'Asparagine or aspartic acid',\n    aa3: 'Asx',\n    aa1: 'B',\n  },\n  {\n    name: 'Glutamine or glutamic acid',\n    aa3: 'Glx',\n    aa1: 'Z',\n  },\n  {\n    name: 'Leucine or isoleucine',\n    aa3: 'Xle',\n    aa1: 'J',\n  },\n  {\n    name: 'Unspecified or unknown',\n    aa3: 'Xaa',\n    aa1: 'X',\n  },\n];\n","'use strict';\n\nconst aa = require('./aminoAcids');\nconst IEP = require('./isoElectricPoint');\nconst chargePeptide = require('./chargePeptide');\nconst allowNeutralLoss = require('./allowNeutralLoss');\nconst splitPeptide = require('./splitPeptide');\nconst digestPeptide = require('./digestPeptide');\nconst generatePeptideFragments = require('./generatePeptideFragments');\nconst convertAASequence = require('./convertAASequence');\n\nexports.getInfo = function() {\n  return aa;\n};\n\n// sequence should be in the \"right\" format like HAlaGlyProOH\n\nexports.splitPeptide = splitPeptide;\nexports.digestPeptide = digestPeptide;\n\nexports.calculateIEP = function(sequence) {\n  let aas = splitPeptide(sequence);\n  let result = IEP.calculateIEP(aas);\n  return result;\n};\n\nexports.calculateIEPChart = function(sequence) {\n  let aas = splitPeptide(sequence);\n  let result = IEP.calculateChart(aas);\n  return result;\n};\n\nexports.getColorForIEP = function(iep) {\n  return IEP.getColor(iep);\n};\n\nexports.calculateCharge = function(sequence, ph) {\n  let aas = splitPeptide(sequence);\n  return IEP.calculateCharge(aas, ph);\n};\n\nexports.generatePeptideFragments = generatePeptideFragments;\n\nexports.chargePeptide = chargePeptide;\nexports.allowNeutralLoss = allowNeutralLoss;\n\nexports.convertAASequence = convertAASequence;\n\nexports.sequenceToMF = convertAASequence;\n","'use strict';\n\nlet aa = require('./aminoAcids');\n\n// we will convert the data to an object to be much faster\nlet aaObject = {};\nfor (let i = 0; i < aa.length; i++) {\n  aaObject[aa[i].aa3] = aa[i];\n}\n\nfunction calculateCharge(aas, pH) {\n  if (!pH) pH = 7.0;\n  let combined = combine(aas);\n  if (!combined) return;\n  let charge = calculateForPh(combined, pH);\n  return Math.round(charge * 1000) / 1000;\n}\n\n// this methods required an array of aas\n\nfunction calculateIEP(aas) {\n  let combined = combine(aas);\n  if (!combined) return;\n  let first = 0;\n  let last = 14;\n  let current = 14;\n  let previous = 0;\n  let currentCharge;\n  while (Math.abs(current - previous) > 0.0001) {\n    previous = current;\n    current = (last + first) / 2;\n    currentCharge = calculateForPh(combined, current);\n    if (currentCharge > 0) {\n      first = current;\n    } else if (currentCharge < 0) {\n      last = current;\n    } else {\n      previous = current;\n    }\n  }\n  return Math.round(current * 1000) / 1000;\n}\n\nfunction calculateChart(aas) {\n  let combined = combine(aas);\n  if (!combined) return;\n  let y = [];\n  let x = [];\n  let yAbs = [];\n  for (let i = 0; i <= 14; i = i + 0.01) {\n    let charge = calculateForPh(combined, i);\n    x.push(i);\n    y.push(charge);\n    yAbs.push(Math.abs(charge));\n  }\n  combined.x = x;\n  combined.y = y;\n  combined.yAbs = yAbs;\n\n  return combined;\n}\n\nfunction calculateForPh(combined, pH) {\n  let total = 0;\n  total += 1 / (1 + Math.pow(10, pH - combined.first));\n  total += -1 / (1 + Math.pow(10, combined.last - pH));\n  for (let key in combined.acid) {\n    total +=\n      -combined.acid[key] / (1 + Math.pow(10, aaObject[key].sc.pKa - pH));\n  }\n  for (let key in combined.basic) {\n    total +=\n      combined.basic[key] / (1 + Math.pow(10, pH - aaObject[key].sc.pKa));\n  }\n  return total;\n}\n\n// we will combine the amino acids\nfunction combine(aas) {\n  let combined = {};\n  if (aaObject[aas[0]]) {\n    combined.first = aaObject[aas[0]].pKaN;\n  } else {\n    return;\n  }\n  if (aaObject[aas[aas.length - 1]]) {\n    combined.last = aaObject[aas[aas.length - 1]].pKaC;\n  } else {\n    return;\n  }\n  combined.basic = {};\n  combined.acid = {};\n  for (let i = 0; i < aas.length; i++) {\n    let aa = aas[i];\n    if (!aaObject[aa]) return;\n    if (aaObject[aa].sc && aaObject[aa].sc.type) {\n      if (aaObject[aa].sc.type === 'positive') {\n        if (!combined.basic[aa]) {\n          combined.basic[aa] = 0;\n        }\n        combined.basic[aa]++;\n      } else if (aaObject[aa].sc.type === 'negative') {\n        if (!combined.acid[aa]) {\n          combined.acid[aa] = 0;\n        }\n        combined.acid[aa]++;\n      }\n    }\n  }\n  return combined;\n}\n\n/*\n We can generate a color based on iep\n 0 -> 7 means that at pH 7 it is charged negatively (blue)\n 7 -> 14 means that at pH7 it is charged positively (red)\n */\nfunction getColor(iep) {\n  if (iep < 7) {\n    if (iep < 3) iep = 3;\n    let white = Math.round(255 - (7 - iep) * (200 / 4));\n    return `rgb(${white},${white},255)`;\n  } else if (iep > 7) {\n    if (iep > 11) iep = 11;\n    let white = Math.round(255 - (iep - 7) * (200 / 4));\n    return `rgb(255,${white},${white})`;\n  }\n  return 'rgb(255,255,255)';\n}\n\nmodule.exports = {\n  calculateIEP: calculateIEP,\n  calculateCharge: calculateCharge,\n  calculateChart: calculateChart,\n  getColor: getColor,\n};\n","'use strict';\n\nlet getAA = require('./getAA');\n\n// SOURCE: https://en.wikipedia.org/wiki/Amino_acid\n\nfunction chargePeptide(mf, options = {}) {\n  if (options.pH === undefined) options.pH = 0;\n  if (Array.isArray(mf)) {\n    for (let i = 0; i < mf.length; i++) {\n      mf[i] = chargeOnePeptide(mf[i], options);\n    }\n    return mf;\n  } else {\n    return chargeOnePeptide(mf, options);\n  }\n}\n\nfunction chargeOnePeptide(mf, options) {\n  let pH = options.pH;\n  // we will allow to charge the peptide at a specific pH\n\n  // first amino acids (N-terminal)\n  if (mf.match(/^H[A-Z][a-z]{2}/)) {\n    let firstAA = mf.replace(/^H([A-Z][a-z]{2}).*/, '$1');\n    if (getAA(firstAA) && pH < getAA(firstAA).pKaN) {\n      mf = mf.replace(/^H([^+])/, 'H+H$1');\n    }\n  }\n\n  // last amino acids (C-terminal)\n  if (mf.match(/[A-Z][a-z]{2}OH$/)) {\n    let lastAA = mf.replace(/.*([A-Z][a-z]{2})OH$/, '$1');\n    if (getAA(lastAA) && pH > getAA(lastAA).pKaC) {\n      mf = mf.replace(/OH$/, 'O-');\n    }\n  }\n\n  // basic AA\n  if (pH < getAA('Arg').sc.pKa) mf = mf.replace(/(Arg)(?!\\()/g, '$1(H+)');\n  if (pH < getAA('His').sc.pKa) mf = mf.replace(/(His)(?!\\()/g, '$1(H+)');\n  if (pH < getAA('Lys').sc.pKa) mf = mf.replace(/(Lys)(?!\\()/g, '$1(H+)');\n\n  // acid AA\n  if (pH > getAA('Asp').sc.pKa) mf = mf.replace(/(Asp)(?!\\()/g, '$1(H-1-)');\n  if (pH > getAA('Glu').sc.pKa) mf = mf.replace(/(Glu)(?!\\()/g, '$1(H-1-)');\n\n  if (pH > getAA('Cys').sc.pKa) mf = mf.replace(/(Cys)(?!\\()/g, '$1(H-1-)');\n\n  return mf;\n}\n\nmodule.exports = chargePeptide;\n","'use strict';\n\nlet aa = require('./aminoAcids');\n\nfunction getAA(code) {\n  if (code.length === 1) {\n    for (let i = 0; i < aa.length; i++) {\n      if (aa[i].aa1 === code) {\n        return aa[i];\n      }\n    }\n  }\n  if (code.length === 3) {\n    for (let i = 0; i < aa.length; i++) {\n      if (aa[i].aa3 === code) {\n        return aa[i];\n      }\n    }\n  }\n}\n\nmodule.exports = getAA;\n","'use strict';\n\nfunction allowNeutralLoss(mf, options) {\n  if (Array.isArray(mf)) {\n    for (let i = 0; i < mf.length; i++) {\n      mf[i] = allowOneNeutralLoss(mf[i], options);\n    }\n    return mf;\n  } else {\n    return allowOneNeutralLoss(mf, options);\n  }\n}\n\nfunction allowOneNeutralLoss(mf) {\n  mf = mf.replace(/(Ser|Thr|Asp|Glu)(?!\\()/g, '$1(H-2O-1)0-1');\n  mf = mf.replace(/(Arg|Lys|Asn|Gln)(?!\\()/g, '$1(N-1H-3)0-1');\n\n  return mf;\n}\n\nmodule.exports = allowNeutralLoss;\n","'use strict';\n\nfunction splitSequence(sequence) {\n  let aas = sequence.replace(/([A-Z])/g, ' $1').split(/ /);\n  let begin = 0;\n  while (aas[begin] === '' || aas[begin] === 'H') {\n    begin++;\n  }\n  let end = aas.length - 1;\n  while (aas[end] === 'O' || aas[end] === 'H') {\n    end--;\n  }\n  aas = aas.slice(begin, end + 1);\n  return aas;\n}\n\nmodule.exports = splitSequence;\n","'use strict';\n\n/*\nIotuibs:\n* minMissed (default: 0)\n* maxMissed (default: 0)\n* minResidue: 0;\n* maxResidue: infinity\n* enzyme: chymotrypsin, trypsin, glucph4, glucph8, thermolysin, cyanogenbromide : Mandatory, no default value !\n */\n\nfunction digestSequence(sequence, options = {}) {\n  sequence = sequence.replace(/^H([^a-z])/, '$1').replace(/OH$/, '');\n\n  options.enzyme = options.enzyme || 'trypsin';\n  if (options.minMissed === undefined) options.minMissed = 0;\n  if (options.maxMissed === undefined) options.maxMissed = 0;\n  if (options.minResidue === undefined) options.minResidue = 0;\n  if (options.maxResidue === undefined) options.maxResidue = Number.MAX_VALUE;\n  let regexp = getRegexp(options.enzyme);\n  let fragments = sequence\n    .replace(regexp, '$1 ')\n    .split(/ /)\n    .filter((entry) => entry);\n\n  let from = 0;\n  for (let i = 0; i < fragments.length; i++) {\n    let nbResidue = fragments[i]\n      .replace(/([A-Z][a-z][a-z])/g, ' $1')\n      .split(/ /)\n      .filter((entry) => entry).length;\n    fragments[i] = {\n      sequence: fragments[i],\n      nbResidue: nbResidue,\n      from: from,\n      to: from + nbResidue - 1,\n    };\n    from += nbResidue;\n  }\n\n  let results = [];\n\n  for (let i = 0; i < fragments.length - options.minMissed; i++) {\n    for (\n      let j = options.minMissed;\n      j <= Math.min(options.maxMissed, fragments.length - i - 1);\n      j++\n    ) {\n      let fragment = '';\n      let nbResidue = 0;\n      for (let k = i; k <= i + j; k++) {\n        fragment += fragments[k].sequence;\n        nbResidue += fragments[k].nbResidue;\n      }\n      let from = fragments[i].from + 1;\n      let to = fragments[i + j].to + 1;\n      if (\n        fragment &&\n        nbResidue >= options.minResidue &&\n        nbResidue <= options.maxResidue\n      ) {\n        results.push(`H${fragment}OH$D${from}>${to}`);\n      }\n    }\n  }\n\n  return results;\n}\n\nfunction getRegexp(enzyme) {\n  switch (enzyme.toLowerCase().replace(/[^a-z0-9]/g, '')) {\n    case 'chymotrypsin':\n      return /(Phe|Tyr|Trp)(?!Pro)/g;\n    case 'trypsin':\n      return /(Lys|Arg)(?!Pro)/g;\n    case 'lysc':\n      return /(Lys)(?!Pro)/g;\n    case 'glucph4':\n      return /(Glu)(?!Pro|Glu)/g;\n    case 'glucph8':\n      return /(Asp|Glu)(?!Pro|Glu)/g;\n    case 'thermolysin': // N-term of  Leu, Phe, Val, Ile, Ala, Met\n      return /()(?=Ile|Leu|Val|Ala|Met|Phe)/g;\n    case 'cyanogenbromide':\n      return /(Met)/g;\n    case 'any':\n      return /()(?=[A-Z][a-z][a-z])/g;\n    default:\n      throw new Error(`Digestion enzyme: ${enzyme} is unknown`);\n  }\n}\n\nmodule.exports = digestSequence;\n","'use strict';\n\nmodule.exports = function(mf, options) {\n  if (options === undefined) {\n    options = {\n      a: false,\n      b: true,\n      c: false,\n      x: false,\n      y: true,\n      z: false,\n      i: false,\n      ya: false,\n      yb: false,\n      yc: false,\n      zc: false,\n    };\n  }\n  options.maxInternal = options.maxInternal || Number.MAX_VALUE;\n  options.minInternal = options.minInternal || 0;\n\n  let mfs = [];\n  // need to allow 0-9 to deal with neutral loss\n  let mfparts = mf\n    .replace(/([a-z)0-9])([A-Z][a-z](?=[a-z]))/g, '$1 $2')\n    .split(/ /);\n\n  let nTerm = '';\n  let cTerm = '';\n\n  for (let i = 1; i < mfparts.length; i++) {\n    nTerm += mfparts[i - 1];\n    cTerm = mfparts[mfparts.length - i] + cTerm;\n    addNTerm(mfs, nTerm, i, options);\n    addCTerm(mfs, cTerm, i, options);\n    if (options.i) mfs.push(`${mfparts[i]}HC-1O-1(+1)$i:${mfparts[i]}`);\n\n    if (options.ya || options.yb || options.yc || options.zc) {\n      // we have double fragmentations\n      for (\n        let j = i + 1;\n        j < Math.min(mfparts.length, options.maxInternal + i + 1);\n        j++\n      ) {\n        let iTerm = '';\n        if (j - i >= options.minInternal) {\n          for (let k = i; k < j; k++) {\n            iTerm += mfparts[k];\n          }\n          addITerm(mfs, iTerm, mfparts.length - i, j, options);\n        }\n      }\n    }\n  }\n\n  if (mfs.length === 0) {\n    mfs = mfs.concat([mf]);\n  }\n\n  return mfs;\n};\n\nfunction addNTerm(mfs, nTerm, i, options) {\n  if (options.a) mfs.push(`${nTerm}C-1O-1(+1)$a${i}`);\n  if (options.b) mfs.push(`${nTerm}(+1)$b${i}`);\n  if (options.c) mfs.push(`${nTerm}NH3(+1)$c${i}`);\n}\n\nfunction addITerm(mfs, iTerm, i, j, options) {\n  if (options.ya) mfs.push(`H${iTerm}C-1O-1(+1)$a${j}y${i}`);\n  if (options.yb) mfs.push(`H${iTerm}(+1)$b${j}y${i}`);\n  if (options.yc) mfs.push(`H${iTerm}NH3(+1)$c${j}y${i}`);\n  if (options.zc) mfs.push(`N-1${iTerm}NH3(+1)$c${j}z${i}`);\n}\n\nfunction addCTerm(mfs, cTerm, i, options) {\n  if (options.x) mfs.push(`CO(+1)${cTerm}$x${i}`);\n  if (options.y) mfs.push(`H2(+1)${cTerm}$y${i}`);\n  if (options.z) mfs.push(`N-1H-1(+1)${cTerm}$z${i}`);\n}\n","'use strict';\n\nconst aa = require('./aminoAcids');\n\nfunction convertAASequence(mf) {\n  // this function will check if it is a sequence of aa in 1 letter or 3 letters and convert them if it is the case\n  // it could be a multiline mf !\n  // if it is a multiline we could make some \"tricks\" ...\n  let newMF = mf;\n  // SEQRES   1 B  256  MET PRO VAL GLU ILE THR VAL LYS GLU LEU LEU GLU ALA\n  // SEQRES   2 B  256  GLY VAL HIS PHE GLY HIS GLU ARG LYS ARG TRP ASN PRO\n  // or\n  // MET PRO VAL GLU ILE THR VAL LYS GLU LEU LEU GLU ALA\n  // GLY VAL HIS PHE GLY HIS GLU ARG LYS ARG TRP ASN PRO\n  if (mf.search(/[A-Z]{3} [A-Z]{3} [A-Z]{3}/) > -1) {\n    // this is a PDB !\n    let tmpmf = mf.replace(/[\\r\\n]+/g, ' ');\n    tmpmf = tmpmf.replace(/(SEQRES|[0-9]+| [A-Z] | [0-9A-Z]{4-50})/g, '');\n    // we need to correct the uppercase / lowercase\n    let parts = tmpmf.split(' ');\n    newMF = 'H';\n    for (let i = 0; i < parts.length; i++) {\n      newMF += parts[i].substr(0, 1) + parts[i].substr(1).toLowerCase();\n    }\n    newMF += 'OH';\n  } else if (mf.includes('(')) {\n    // we expect one letter code with modification\n    newMF = '';\n    let nTerminal = 'H';\n    let cTerminal = 'OH';\n    let parenthesisCounter = 0;\n    for (let i = 0; i < mf.length; i++) {\n      let currentSymbol = mf[i];\n      if (\n        currentSymbol === '(' ||\n        currentSymbol === ')' ||\n        parenthesisCounter > 0\n      ) {\n        if (currentSymbol === '(') {\n          parenthesisCounter++;\n          if (i === 0) nTerminal = '';\n        }\n        if (currentSymbol === ')') {\n          parenthesisCounter--;\n          if (i === mf.length - 1) cTerminal = '';\n        }\n        newMF += currentSymbol;\n        continue;\n      }\n      newMF += convertAA1To3(currentSymbol);\n    }\n    newMF = nTerminal + newMF + cTerminal;\n  } else if (\n    mf.search(/[A-Z]{3}/) > -1 &&\n    mf.search(/[a-zA-Z][a-z0-9]/) === -1\n  ) {\n    // UNIPROT\n    //   370        380        390        400        410        420\n    //GFKPNLRKTF VSGLFRESCG AHFYRGVDVK PFYIKKPVDN LFALMLILNR LRGWGVVGGM\n    //\n    //    430        440        450        460        470        480\n    //SDPRLYKVWV RLSSQVPSMF FGGTDLAADY YVVSPPTAVS VYTKTPYGRL LADTRTSGFR\n    // We remove all the number, all the spaces, etc\n    newMF = `H${convertAA1To3(newMF.replace(/[^A-Z]/g, ''))}OH`;\n  }\n\n  return newMF;\n}\n\nfunction convertAA1To3(mf) {\n  let newmf = '';\n  for (let i = 0; i < mf.length; i++) {\n    newmf += aa1To3(mf.charAt(i));\n  }\n  return newmf;\n}\n\nfunction aa1To3(code) {\n  for (let i = 0; i < aa.length; i++) {\n    if (aa[i].aa1 === code) {\n      return aa[i].aa3;\n    }\n  }\n  throw new Error(`Invalid 1 letter code: ${code}`);\n}\n\nmodule.exports = convertAASequence;\n"],"sourceRoot":""}