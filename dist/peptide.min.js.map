{"version":3,"sources":["webpack://Peptide/webpack/universalModuleDefinition","webpack://Peptide/webpack/bootstrap","webpack://Peptide/./src/aminoAcids.js","webpack://Peptide/./src/index.js","webpack://Peptide/./src/isoElectricPoint.js","webpack://Peptide/./src/chargePeptide.js","webpack://Peptide/./src/getAA.js","webpack://Peptide/./src/allowNeutralLoss.js","webpack://Peptide/./src/splitPeptide.js","webpack://Peptide/./src/digestPeptide.js","webpack://Peptide/./src/generatePeptideFragments.js","webpack://Peptide/./src/convertAASequence.js"],"names":["root","factory","exports","module","define","amd","self","this","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","aa3","aa1","sc","type","pKaC","pKaN","pKa","aa","require","IEP","chargePeptide","allowNeutralLoss","splitPeptide","digestPeptide","generatePeptideFragments","convertAASequence","getInfo","calculateIEP","sequence","aas","calculateIEPChart","calculateChart","getColorForIEP","iep","getColor","calculateCharge","ph","sequenceToMF","aaObject","length","calculateForPh","combined","pH","total","Math","pow","first","last","acid","basic","combine","currentCharge","current","previous","abs","round","charge","y","x","yAbs","push","white","getAA","chargeOnePeptide","mf","options","match","firstAA","replace","lastAA","undefined","Array","isArray","code","allowOneNeutralLoss","split","begin","end","slice","enzyme","minMissed","maxMissed","minResidue","maxResidue","Number","MAX_VALUE","regexp","toLowerCase","Error","getRegexp","fragments","filter","entry","from","nbResidue","to","results","j","min","fragment","k","addNTerm","mfs","nTerm","a","b","addITerm","iTerm","ya","yb","yc","zc","addCTerm","cTerm","z","maxInternal","minInternal","mfparts","concat","convertAA1To3","newmf","aa1To3","charAt","newMF","search","tmpmf","parts","substr","includes","parenthesisLevel","char","isOneLetterCode","nTerminal","cTerminal","parenthesisCounter","currentSymbol"],"mappings":"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","file":"peptide.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Peptide\"] = factory();\n\telse\n\t\troot[\"Peptide\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","'use strict';\n\n// SOURCE: https://en.wikipedia.org/wiki/Amino_acid\n// Link for UTF8 code for modified: https://codepoints.net/search?sc=Grek\nmodule.exports = [\n  // Standard amino acids\n  {\n    name: 'Alanine',\n    aa3: 'Ala',\n    aa1: 'A',\n    sc: {\n      type: 'hydrophobic'\n    },\n    pKaC: 2.33,\n    pKaN: 9.71\n  },\n  {\n    name: 'Arginine',\n    aa3: 'Arg',\n    aa1: 'R',\n    sc: {\n      type: 'positive',\n      pKa: 12.1\n    },\n    pKaC: 2.03,\n    pKaN: 9.0\n  },\n  {\n    name: 'Asparagine',\n    aa3: 'Asn',\n    aa1: 'N',\n    sc: {\n      type: 'polar'\n    },\n    pKaC: 2.13,\n    pKaN: 9.05\n  },\n  {\n    name: 'Aspartic acid',\n    aa3: 'Asp',\n    aa1: 'D',\n    sc: {\n      type: 'negative',\n      pKa: 3.71\n    },\n    pKaC: 1.95,\n    pKaN: 9.66\n  },\n  {\n    name: 'Cysteine',\n    aa3: 'Cys',\n    aa1: 'C',\n    sc: {\n      type: 'special',\n      pKa: 8.14\n    },\n    pKaC: 1.91,\n    pKaN: 10.28\n  },\n  {\n    name: 'Glutamic acid',\n    aa3: 'Glu',\n    aa1: 'E',\n    sc: {\n      type: 'negative',\n      pKa: 4.15\n    },\n    pKaC: 2.16,\n    pKaN: 9.58\n  },\n  {\n    name: 'Glutamine',\n    aa3: 'Gln',\n    aa1: 'Q',\n    sc: {\n      type: 'polar'\n    },\n    pKaC: 2.18,\n    pKaN: 9.0\n  },\n  {\n    name: 'Glycine',\n    aa3: 'Gly',\n    aa1: 'G',\n    sc: {\n      type: 'special'\n    },\n    pKaC: 2.34,\n    pKaN: 9.58\n  },\n  {\n    name: 'Histidine',\n    aa3: 'His',\n    aa1: 'H',\n    sc: {\n      type: 'positive',\n      pKa: 6.04\n    },\n    pKaC: 1.7,\n    pKaN: 9.09\n  },\n  {\n    name: 'Isoleucine',\n    aa3: 'Ile',\n    aa1: 'I',\n    sc: {\n      type: 'hydrophobic'\n    },\n    pKaC: 2.26,\n    pKaN: 9.6\n  },\n  {\n    name: 'Leucine',\n    aa3: 'Leu',\n    aa1: 'L',\n    sc: {\n      type: 'hydrophobic'\n    },\n    pKaC: 2.32,\n    pKaN: 9.58\n  },\n  {\n    name: 'Lysine',\n    aa3: 'Lys',\n    aa1: 'K',\n    sc: {\n      type: 'positive',\n      pKa: 10.67\n    },\n    pKaC: 2.15,\n    pKaN: 9.16\n  },\n  {\n    name: 'Methionine',\n    aa3: 'Met',\n    aa1: 'M',\n    sc: {\n      type: 'hydrophobic'\n    },\n    pKaC: 2.16,\n    pKaN: 9.08\n  },\n  {\n    name: 'Phenylalanine',\n    aa3: 'Phe',\n    aa1: 'F',\n    sc: {\n      type: 'hydrophobic'\n    },\n    pKaC: 2.18,\n    pKaN: 9.09\n  },\n  {\n    name: 'Proline',\n    aa3: 'Pro',\n    aa1: 'P',\n    sc: {\n      type: 'special'\n    },\n    pKaC: 1.95,\n    pKaN: 10.47\n  },\n  {\n    name: 'Serine',\n    aa3: 'Ser',\n    aa1: 'S',\n    sc: {\n      type: 'polar'\n    },\n    pKaC: 2.13,\n    pKaN: 9.05\n  },\n  {\n    name: 'Threonine',\n    aa3: 'Thr',\n    aa1: 'T',\n    sc: {\n      type: 'polar'\n    },\n    pKaC: 2.2,\n    pKaN: 8.96\n  },\n  {\n    name: 'Tryptophan',\n    aa3: 'Trp',\n    aa1: 'W',\n    sc: {\n      type: 'hydrophobic'\n    },\n    pKaC: 2.38,\n    pKaN: 9.34\n  },\n  {\n    name: 'Tyrosine',\n    aa3: 'Tyr',\n    aa1: 'Y',\n    sc: {\n      type: 'hydrophobic'\n    },\n    pKaC: 2.24,\n    pKaN: 9.04\n  },\n  {\n    name: 'Valine',\n    aa3: 'Val',\n    aa1: 'V',\n    sc: {\n      type: 'hydrophobic'\n    },\n    pKaC: 2.27,\n    pKaN: 9.52\n  },\n  // Additional\n  {\n    name: 'Selenocysteine',\n    aa3: 'Sec',\n    aa1: 'U'\n  },\n  {\n    name: 'Pyrrolysine',\n    aa3: 'Pyl',\n    aa1: 'O'\n  },\n  // Ambiguous\n  {\n    name: 'Asparagine or aspartic acid',\n    aa3: 'Asx',\n    aa1: 'B'\n  },\n  {\n    name: 'Glutamine or glutamic acid',\n    aa3: 'Glx',\n    aa1: 'Z'\n  },\n  {\n    name: 'Leucine or isoleucine',\n    aa3: 'Xle',\n    aa1: 'J'\n  },\n  {\n    name: 'Unspecified or unknown',\n    aa3: 'Xaa',\n    aa1: 'X'\n  }\n];\n","'use strict';\n\nconst aa = require('./aminoAcids');\nconst IEP = require('./isoElectricPoint');\nconst chargePeptide = require('./chargePeptide');\nconst allowNeutralLoss = require('./allowNeutralLoss');\nconst splitPeptide = require('./splitPeptide');\nconst digestPeptide = require('./digestPeptide');\nconst generatePeptideFragments = require('./generatePeptideFragments');\nconst convertAASequence = require('./convertAASequence');\n\nexports.getInfo = function() {\n  return aa;\n};\n\n// sequence should be in the \"right\" format like HAlaGlyProOH\n\nexports.splitPeptide = splitPeptide;\nexports.digestPeptide = digestPeptide;\n\nexports.calculateIEP = function(sequence) {\n  let aas = splitPeptide(sequence);\n  let result = IEP.calculateIEP(aas);\n  return result;\n};\n\nexports.calculateIEPChart = function(sequence) {\n  let aas = splitPeptide(sequence);\n  let result = IEP.calculateChart(aas);\n  return result;\n};\n\nexports.getColorForIEP = function(iep) {\n  return IEP.getColor(iep);\n};\n\nexports.calculateCharge = function(sequence, ph) {\n  let aas = splitPeptide(sequence);\n  return IEP.calculateCharge(aas, ph);\n};\n\nexports.generatePeptideFragments = generatePeptideFragments;\n\nexports.chargePeptide = chargePeptide;\nexports.allowNeutralLoss = allowNeutralLoss;\n\nexports.convertAASequence = convertAASequence;\n\nexports.sequenceToMF = convertAASequence;\n","'use strict';\n\nlet aa = require('./aminoAcids');\n\n// we will convert the data to an object to be much faster\nlet aaObject = {};\nfor (let i = 0; i < aa.length; i++) {\n  aaObject[aa[i].aa3] = aa[i];\n}\n\nfunction calculateCharge(aas, pH) {\n  if (!pH) pH = 7.0;\n  let combined = combine(aas);\n  if (!combined) return;\n  let charge = calculateForPh(combined, pH);\n  return Math.round(charge * 1000) / 1000;\n}\n\n// this methods required an array of aas\n\nfunction calculateIEP(aas) {\n  let combined = combine(aas);\n  if (!combined) return;\n  let first = 0;\n  let last = 14;\n  let current = 14;\n  let previous = 0;\n  let currentCharge;\n  while (Math.abs(current - previous) > 0.0001) {\n    previous = current;\n    current = (last + first) / 2;\n    currentCharge = calculateForPh(combined, current);\n    if (currentCharge > 0) {\n      first = current;\n    } else if (currentCharge < 0) {\n      last = current;\n    } else {\n      previous = current;\n    }\n  }\n  return Math.round(current * 1000) / 1000;\n}\n\nfunction calculateChart(aas) {\n  let combined = combine(aas);\n  if (!combined) return;\n  let y = [];\n  let x = [];\n  let yAbs = [];\n  for (let i = 0; i <= 14; i = i + 0.01) {\n    let charge = calculateForPh(combined, i);\n    x.push(i);\n    y.push(charge);\n    yAbs.push(Math.abs(charge));\n  }\n  combined.x = x;\n  combined.y = y;\n  combined.yAbs = yAbs;\n\n  return combined;\n}\n\nfunction calculateForPh(combined, pH) {\n  let total = 0;\n  total += 1 / (1 + Math.pow(10, pH - combined.first));\n  total += -1 / (1 + Math.pow(10, combined.last - pH));\n  for (let key in combined.acid) {\n    total +=\n      -combined.acid[key] / (1 + Math.pow(10, aaObject[key].sc.pKa - pH));\n  }\n  for (let key in combined.basic) {\n    total +=\n      combined.basic[key] / (1 + Math.pow(10, pH - aaObject[key].sc.pKa));\n  }\n  return total;\n}\n\n// we will combine the amino acids\nfunction combine(aas) {\n  let combined = {};\n  if (aaObject[aas[0]]) {\n    combined.first = aaObject[aas[0]].pKaN;\n  } else {\n    return;\n  }\n  if (aaObject[aas[aas.length - 1]]) {\n    combined.last = aaObject[aas[aas.length - 1]].pKaC;\n  } else {\n    return;\n  }\n  combined.basic = {};\n  combined.acid = {};\n  for (let i = 0; i < aas.length; i++) {\n    let aa = aas[i];\n    if (!aaObject[aa]) return;\n    if (aaObject[aa].sc && aaObject[aa].sc.type) {\n      if (aaObject[aa].sc.type === 'positive') {\n        if (!combined.basic[aa]) {\n          combined.basic[aa] = 0;\n        }\n        combined.basic[aa]++;\n      } else if (aaObject[aa].sc.type === 'negative') {\n        if (!combined.acid[aa]) {\n          combined.acid[aa] = 0;\n        }\n        combined.acid[aa]++;\n      }\n    }\n  }\n  return combined;\n}\n\n/*\n We can generate a color based on iep\n 0 -> 7 means that at pH 7 it is charged negatively (blue)\n 7 -> 14 means that at pH7 it is charged positively (red)\n */\nfunction getColor(iep) {\n  if (iep < 7) {\n    if (iep < 3) iep = 3;\n    let white = Math.round(255 - (7 - iep) * (200 / 4));\n    return `rgb(${white},${white},255)`;\n  } else if (iep > 7) {\n    if (iep > 11) iep = 11;\n    let white = Math.round(255 - (iep - 7) * (200 / 4));\n    return `rgb(255,${white},${white})`;\n  }\n  return 'rgb(255,255,255)';\n}\n\nmodule.exports = {\n  calculateIEP: calculateIEP,\n  calculateCharge: calculateCharge,\n  calculateChart: calculateChart,\n  getColor: getColor,\n};\n","'use strict';\n\nlet getAA = require('./getAA');\n\n// SOURCE: https://en.wikipedia.org/wiki/Amino_acid\n\nfunction chargePeptide(mf, options = {}) {\n  if (options.pH === undefined) options.pH = 0;\n  if (Array.isArray(mf)) {\n    for (let i = 0; i < mf.length; i++) {\n      mf[i] = chargeOnePeptide(mf[i], options);\n    }\n    return mf;\n  } else {\n    return chargeOnePeptide(mf, options);\n  }\n}\n\nfunction chargeOnePeptide(mf, options) {\n  let pH = options.pH;\n  // we will allow to charge the peptide at a specific pH\n\n  // first amino acids (N-terminal)\n  if (mf.match(/^H[A-Z][a-z]{2}/)) {\n    let firstAA = mf.replace(/^H([A-Z][a-z]{2}).*/, '$1');\n    if (getAA(firstAA) && pH < getAA(firstAA).pKaN) {\n      mf = mf.replace(/^H([^+])/, 'H+H$1');\n    }\n  }\n\n  // last amino acids (C-terminal)\n  if (mf.match(/[A-Z][a-z]{2}OH$/)) {\n    let lastAA = mf.replace(/.*([A-Z][a-z]{2})OH$/, '$1');\n    if (getAA(lastAA) && pH > getAA(lastAA).pKaC) {\n      mf = mf.replace(/OH$/, 'O-');\n    }\n  }\n\n  // basic AA\n  if (pH < getAA('Arg').sc.pKa) mf = mf.replace(/(Arg)(?!\\()/g, '$1(H+)');\n  if (pH < getAA('His').sc.pKa) mf = mf.replace(/(His)(?!\\()/g, '$1(H+)');\n  if (pH < getAA('Lys').sc.pKa) mf = mf.replace(/(Lys)(?!\\()/g, '$1(H+)');\n\n  // acid AA\n  if (pH > getAA('Asp').sc.pKa) mf = mf.replace(/(Asp)(?!\\()/g, '$1(H-1-)');\n  if (pH > getAA('Glu').sc.pKa) mf = mf.replace(/(Glu)(?!\\()/g, '$1(H-1-)');\n\n  if (pH > getAA('Cys').sc.pKa) mf = mf.replace(/(Cys)(?!\\()/g, '$1(H-1-)');\n\n  return mf;\n}\n\nmodule.exports = chargePeptide;\n","'use strict';\n\nlet aa = require('./aminoAcids');\n\nfunction getAA(code) {\n  if (code.length === 1) {\n    for (let i = 0; i < aa.length; i++) {\n      if (aa[i].aa1 === code) {\n        return aa[i];\n      }\n    }\n  }\n  if (code.length === 3) {\n    for (let i = 0; i < aa.length; i++) {\n      if (aa[i].aa3 === code) {\n        return aa[i];\n      }\n    }\n  }\n}\n\nmodule.exports = getAA;\n","'use strict';\n\nfunction allowNeutralLoss(mf, options) {\n  if (Array.isArray(mf)) {\n    for (let i = 0; i < mf.length; i++) {\n      mf[i] = allowOneNeutralLoss(mf[i], options);\n    }\n    return mf;\n  } else {\n    return allowOneNeutralLoss(mf, options);\n  }\n}\n\nfunction allowOneNeutralLoss(mf) {\n  mf = mf.replace(/(Ser|Thr|Asp|Glu)(?!\\()/g, '$1(H-2O-1)0-1');\n  mf = mf.replace(/(Arg|Lys|Asn|Gln)(?!\\()/g, '$1(N-1H-3)0-1');\n\n  return mf;\n}\n\nmodule.exports = allowNeutralLoss;\n","'use strict';\n\nfunction splitSequence(sequence) {\n  let aas = sequence.replace(/([A-Z])/g, ' $1').split(/ /);\n  let begin = 0;\n  while (aas[begin] === '' || aas[begin] === 'H') {\n    begin++;\n  }\n  let end = aas.length - 1;\n  while (aas[end] === 'O' || aas[end] === 'H') {\n    end--;\n  }\n  aas = aas.slice(begin, end + 1);\n  return aas;\n}\n\nmodule.exports = splitSequence;\n","'use strict';\n\n/*\nIotuibs:\n* minMissed (default: 0)\n* maxMissed (default: 0)\n* minResidue: 0;\n* maxResidue: infinity\n* enzyme: chymotrypsin, trypsin, glucph4, glucph8, thermolysin, cyanogenbromide : Mandatory, no default value !\n */\n\nfunction digestSequence(sequence, options = {}) {\n  sequence = sequence.replace(/^H([^a-z])/, '$1').replace(/OH$/, '');\n\n  options.enzyme = options.enzyme || 'trypsin';\n  if (options.minMissed === undefined) options.minMissed = 0;\n  if (options.maxMissed === undefined) options.maxMissed = 0;\n  if (options.minResidue === undefined) options.minResidue = 0;\n  if (options.maxResidue === undefined) options.maxResidue = Number.MAX_VALUE;\n  let regexp = getRegexp(options.enzyme);\n  let fragments = sequence\n    .replace(regexp, '$1 ')\n    .split(/ /)\n    .filter((entry) => entry);\n\n  let from = 0;\n  for (let i = 0; i < fragments.length; i++) {\n    let nbResidue = fragments[i]\n      .replace(/([A-Z][a-z][a-z])/g, ' $1')\n      .split(/ /)\n      .filter((entry) => entry).length;\n    fragments[i] = {\n      sequence: fragments[i],\n      nbResidue: nbResidue,\n      from: from,\n      to: from + nbResidue - 1,\n    };\n    from += nbResidue;\n  }\n\n  let results = [];\n\n  for (let i = 0; i < fragments.length - options.minMissed; i++) {\n    for (\n      let j = options.minMissed;\n      j <= Math.min(options.maxMissed, fragments.length - i - 1);\n      j++\n    ) {\n      let fragment = '';\n      let nbResidue = 0;\n      for (let k = i; k <= i + j; k++) {\n        fragment += fragments[k].sequence;\n        nbResidue += fragments[k].nbResidue;\n      }\n      let from = fragments[i].from + 1;\n      let to = fragments[i + j].to + 1;\n      if (\n        fragment &&\n        nbResidue >= options.minResidue &&\n        nbResidue <= options.maxResidue\n      ) {\n        results.push(`H${fragment}OH$D${from}>${to}`);\n      }\n    }\n  }\n\n  return results;\n}\n\nfunction getRegexp(enzyme) {\n  switch (enzyme.toLowerCase().replace(/[^a-z0-9]/g, '')) {\n    case 'chymotrypsin':\n      return /(Phe|Tyr|Trp)(?!Pro)/g;\n    case 'trypsin':\n      return /(Lys|Arg)(?!Pro)/g;\n    case 'lysc':\n      return /(Lys)(?!Pro)/g;\n    case 'glucph4':\n      return /(Glu)(?!Pro|Glu)/g;\n    case 'glucph8':\n      return /(Asp|Glu)(?!Pro|Glu)/g;\n    case 'thermolysin': // N-term of  Leu, Phe, Val, Ile, Ala, Met\n      return /()(?=Ile|Leu|Val|Ala|Met|Phe)/g;\n    case 'cyanogenbromide':\n      return /(Met)/g;\n    case 'any':\n      return /()(?=[A-Z][a-z][a-z])/g;\n    default:\n      throw new Error(`Digestion enzyme: ${enzyme} is unknown`);\n  }\n}\n\nmodule.exports = digestSequence;\n","'use strict';\n\nmodule.exports = function(mf, options) {\n  if (options === undefined) {\n    options = {\n      a: false,\n      b: true,\n      c: false,\n      x: false,\n      y: true,\n      z: false,\n      i: false,\n      ya: false,\n      yb: false,\n      yc: false,\n      zc: false,\n    };\n  }\n  options.maxInternal = options.maxInternal || Number.MAX_VALUE;\n  options.minInternal = options.minInternal || 0;\n\n  let mfs = [];\n  // need to allow 0-9 to deal with neutral loss\n  let mfparts = mf\n    .replace(/([a-z)0-9])([A-Z][a-z](?=[a-z]))/g, '$1 $2')\n    .split(/ /);\n\n  let nTerm = '';\n  let cTerm = '';\n\n  for (let i = 1; i < mfparts.length; i++) {\n    nTerm += mfparts[i - 1];\n    cTerm = mfparts[mfparts.length - i] + cTerm;\n    addNTerm(mfs, nTerm, i, options);\n    addCTerm(mfs, cTerm, i, options);\n    if (options.i) mfs.push(`${mfparts[i]}HC-1O-1(+1)$i:${mfparts[i]}`);\n\n    if (options.ya || options.yb || options.yc || options.zc) {\n      // we have double fragmentations\n      for (\n        let j = i + 1;\n        j < Math.min(mfparts.length, options.maxInternal + i + 1);\n        j++\n      ) {\n        let iTerm = '';\n        if (j - i >= options.minInternal) {\n          for (let k = i; k < j; k++) {\n            iTerm += mfparts[k];\n          }\n          addITerm(mfs, iTerm, mfparts.length - i, j, options);\n        }\n      }\n    }\n  }\n\n  if (mfs.length === 0) {\n    mfs = mfs.concat([mf]);\n  }\n\n  return mfs;\n};\n\nfunction addNTerm(mfs, nTerm, i, options) {\n  if (options.a) mfs.push(`${nTerm}C-1O-1(+1)$a${i}`);\n  if (options.b) mfs.push(`${nTerm}(+1)$b${i}`);\n  if (options.c) mfs.push(`${nTerm}NH3(+1)$c${i}`);\n}\n\nfunction addITerm(mfs, iTerm, i, j, options) {\n  if (options.ya) mfs.push(`H${iTerm}C-1O-1(+1)$a${j}y${i}`);\n  if (options.yb) mfs.push(`H${iTerm}(+1)$b${j}y${i}`);\n  if (options.yc) mfs.push(`H${iTerm}NH3(+1)$c${j}y${i}`);\n  if (options.zc) mfs.push(`N-1${iTerm}NH3(+1)$c${j}z${i}`);\n}\n\nfunction addCTerm(mfs, cTerm, i, options) {\n  if (options.x) mfs.push(`CO(+1)${cTerm}$x${i}`);\n  if (options.y) mfs.push(`H2(+1)${cTerm}$y${i}`);\n  if (options.z) mfs.push(`N-1H-1(+1)${cTerm}$z${i}`);\n}\n","'use strict';\n\nconst aa = require('./aminoAcids');\n\nfunction convertAASequence(mf) {\n  // this function will check if it is a sequence of aa in 1 letter or 3 letters and convert them if it is the case\n  // it could be a multiline mf !\n  // if it is a multiline we could make some \"tricks\" ...\n\n  let newMF = mf;\n  // SEQRES   1 B  256  MET PRO VAL GLU ILE THR VAL LYS GLU LEU LEU GLU ALA\n  // SEQRES   2 B  256  GLY VAL HIS PHE GLY HIS GLU ARG LYS ARG TRP ASN PRO\n  // or\n  // MET PRO VAL GLU ILE THR VAL LYS GLU LEU LEU GLU ALA\n  // GLY VAL HIS PHE GLY HIS GLU ARG LYS ARG TRP ASN PRO\n  if (mf.search(/[A-Z]{3} [A-Z]{3} [A-Z]{3}/) > -1) {\n    // this is a PDB !\n    let tmpmf = mf.replace(/[\\r\\n]+/g, ' ');\n    tmpmf = tmpmf.replace(/(SEQRES|[0-9]+| [A-Z] | [0-9A-Z]{4-50})/g, '');\n    // we need to correct the uppercase / lowercase\n    let parts = tmpmf.split(' ');\n    newMF = 'H';\n    for (let i = 0; i < parts.length; i++) {\n      newMF += parts[i].substr(0, 1) + parts[i].substr(1).toLowerCase();\n    }\n    newMF += 'OH';\n  } else if (mf.includes('(') && isOneLetterCode(mf)) {\n    // we expect one letter code with modification\n    newMF = '';\n    let nTerminal = 'H';\n    let cTerminal = 'OH';\n    let parenthesisCounter = 0;\n    for (let i = 0; i < mf.length; i++) {\n      let currentSymbol = mf[i];\n      if (\n        currentSymbol === '(' ||\n        currentSymbol === ')' ||\n        parenthesisCounter > 0\n      ) {\n        if (currentSymbol === '(') {\n          parenthesisCounter++;\n          if (i === 0) nTerminal = '';\n        }\n        if (currentSymbol === ')') {\n          parenthesisCounter--;\n          if (i === mf.length - 1) cTerminal = '';\n        }\n        newMF += currentSymbol;\n        continue;\n      }\n      newMF += convertAA1To3(currentSymbol);\n    }\n    newMF = nTerminal + newMF + cTerminal;\n  } else if (\n    mf.search(/[A-Z]{3}/) > -1 &&\n    mf.search(/[a-zA-Z][a-z0-9]/) === -1\n  ) {\n    // UNIPROT\n    //   370        380        390        400        410        420\n    //GFKPNLRKTF VSGLFRESCG AHFYRGVDVK PFYIKKPVDN LFALMLILNR LRGWGVVGGM\n    //\n    //    430        440        450        460        470        480\n    //SDPRLYKVWV RLSSQVPSMF FGGTDLAADY YVVSPPTAVS VYTKTPYGRL LADTRTSGFR\n    // We remove all the number, all the spaces, etc\n    newMF = `H${convertAA1To3(newMF.replace(/[^A-Z]/g, ''))}OH`;\n  }\n\n  return newMF;\n}\n\nfunction convertAA1To3(mf) {\n  let newmf = '';\n  for (let i = 0; i < mf.length; i++) {\n    newmf += aa1To3(mf.charAt(i));\n  }\n  return newmf;\n}\n\nfunction aa1To3(code) {\n  for (let i = 0; i < aa.length; i++) {\n    if (aa[i].aa1 === code) {\n      return aa[i].aa3;\n    }\n  }\n  throw new Error(`Invalid 1 letter code: ${code}`);\n}\n\nmodule.exports = convertAASequence;\n\n// mf can contain as well parenthesis. We need to check if it is not yet a correct molecular formula\nfunction isOneLetterCode(mf) {\n  let parenthesisLevel = 0;\n  for (let char of mf) {\n    if (parenthesisLevel === 0 && char.match(/[a-z]/)) return false;\n    if (char === '(') parenthesisLevel++;\n    if (char === ')') parenthesisLevel--;\n  }\n  return true;\n}\n"],"sourceRoot":""}