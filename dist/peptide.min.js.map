{"version":3,"sources":["peptide.min.js"],"names":["e","exports","module","define","amd","f","window","global","self","Peptide","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"aa1To3","aa","aa1","aa3","converAA1To3","mf","newmf","charAt","addNTerm","mfs","nTerm","options","push","b","c","addCTerm","cTerm","x","y","z","IEP","getInfo","calculateIEP","sequence","aas","replace","split","slice","result","calculateIEPChart","calculateChart","getColorForIEP","iep","getColor","calculateCharge","ph","generatePeptideFragments","undefined","mfparts","concat","chargePeptide","convertAASequence","search","tmpmf","parts","substr","toLowerCase","./amino_acid","./isoElectricPoint",2,"name","sc","type","pKaC","pKaN","pKa",3,"pH","combined","combine","charge","calculateForPh","Math","round","currentCharge","first","last","current","previous","abs","yAbs","total","pow","key","acid","aaObject","basic","white"],"mappings":"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","file":"peptide.min.js","sourcesContent":["/**\n * peptide - Peptide\n * @version v0.1.1\n * @link https://github.com/cheminfo-js/peptide\n * @license MIT\n */\n!function(e){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=e();else if(\"function\"==typeof define&&define.amd)define([],e);else{var f;\"undefined\"!=typeof window?f=window:\"undefined\"!=typeof global?f=global:\"undefined\"!=typeof self&&(f=self),f.Peptide=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nvar aa = require('./amino_acid');\nvar IEP = require('./isoElectricPoint');\n\n\nexports.getInfo = function () {\n    return aa;\n}\n\n// sequence should be in the \"right\" format like HAlaGlyProOH\n\nexports.calculateIEP = function (sequence) {\n    var aas=sequence.replace(/([A-Z])/g,\" $1\").split(/ /);\n    aas=aas.slice(2,aas.length-2);\n    var result=IEP.calculateIEP(aas);\n    return result;\n}\n\nexports.calculateIEPChart = function (sequence) {\n    var aas=sequence.replace(/([A-Z])/g,\" $1\").split(/ /);\n    aas=aas.slice(2,aas.length-2);\n    var result=IEP.calculateChart(aas);\n    return result;\n}\n\n\nexports.getColorForIEP = function (iep) {\n    return IEP.getColor(iep);\n}\n\nexports.calculateCharge = function (sequence, ph) {\n    var aas=sequence.replace(/([A-Z])/g,\" $1\").split(/ /);\n    aas=aas.slice(2,aas.length-2);\n    return IEP.calculateCharge(aas, ph);\n}\n\nexports.generatePeptideFragments = function generatePeptideFragments(mf, options) {\n    if (options === undefined) {\n        options = {\n            a: false,\n            b: true,\n            c: false,\n            x: false,\n            y: true,\n            z: false,\n            i: false\n        };\n    }\n\n    var mfs = [];\n    var mfparts=mf.replace(/([a-z\\)])([A-Z][a-z](?=[a-z]))/g,\"$1 $2\").split(/ /);\n\n    var nTerm=\"\";\n    var cTerm=\"\";\n    for (var i=1; i<mfparts.length; i++) {\n        nTerm+=mfparts[i-1];\n        cTerm=mfparts[mfparts.length-i]+cTerm;\n        addNTerm(mfs, nTerm, i, options);\n        addCTerm(mfs, cTerm, i, options);\n        if (options.i) mfs.push(mfparts[i]+\"HC-1O-1(+1)$i:\"+mfparts[i]);\n    }\n\n    if (mfs.length === 0) {\n        mfs = mfs.concat([mf]);\n    }\n\n    return mfs;\n\n};\n\nexports.chargePeptide = function chargePeptide(mf) {\n    return mf.replace(/^H([^+])/, 'H+H$1').replace(/(Arg|His|Lys)(?!\\()/g, '$1(H+)');\n};\n\nfunction aa1To3(code) {\n    for (var i = 0; i < aa.length; i++) {\n        if (aa[i].aa1 === code) {\n            return aa[i].aa3;\n        }\n    }\n    throw new Error('Invalid 1 letter code: ' + code);\n}\n\nfunction converAA1To3(mf) {\n    var newmf = '';\n    for (var i = 0; i < mf.length; i++) {\n        newmf += aa1To3(mf.charAt(i));\n    }\n    return newmf;\n}\n\nfunction capitalizeAA3(mf) {\n    for (var i = 0; i < aa.length; i++) {\n        var regexp = new RegExp(aa[i].aa3, 'gi');\n        mf = mf.replace(regexp, aa[i].aa3);\n    }\n    return mf;\n}\n\n\nexports.convertAASequence = function convertAASequence(mf) {\n    // this function will check if it is a sequence of aa in 1 letter or 3 letters and convert them if it is the case\n    // it could be a multiline mf !\n    // if it is a multiline we could make some \"tricks\" ...\n    var newmf = mf;\n    // SEQRES   1 B  256  MET PRO VAL GLU ILE THR VAL LYS GLU LEU LEU GLU ALA\n    // SEQRES   2 B  256  GLY VAL HIS PHE GLY HIS GLU ARG LYS ARG TRP ASN PRO\n    // or\n    // MET PRO VAL GLU ILE THR VAL LYS GLU LEU LEU GLU ALA\n    // GLY VAL HIS PHE GLY HIS GLU ARG LYS ARG TRP ASN PRO\n    if (mf.search(/[A-Z]{3} [A-Z]{3} [A-Z]{3}/) > -1) {\n        // this is a PDB !\n        var tmpmf = mf.replace(/[\\r\\n]+/g, ' ');\n        tmpmf = tmpmf.replace(/(SEQRES|[0-9]+| [A-Z] | [0-9A-Z]{4-50})/g, '');\n        // we need to correct the uppercase / lowercase\n        var parts = tmpmf.split(' ');\n        newmf = 'H';\n        for (var i = 0; i < parts.length; i++) {\n            newmf += parts[i].substr(0, 1) + parts[i].substr(1).toLowerCase();\n        }\n        newmf += 'OH';\n    } else if ((mf.search(/[A-Z]{3}/) > -1) && (mf.search(/[a-zA-Z][a-z0-9]/) == -1)) {\n        // UNIPROT\n        //   370        380        390        400        410        420\n        //GFKPNLRKTF VSGLFRESCG AHFYRGVDVK PFYIKKPVDN LFALMLILNR LRGWGVVGGM\n        //\n        //    430        440        450        460        470        480\n        //SDPRLYKVWV RLSSQVPSMF FGGTDLAADY YVVSPPTAVS VYTKTPYGRL LADTRTSGFR\n        // We remove all the number, all the spaces, etc\n        newmf = 'H' + converAA1To3(newmf.replace(/[^A-Z]/g, '')) + 'OH';\n    }\n\n    return newmf;\n\n};\n\nfunction addNTerm(mfs, nTerm, i, options) {\n    if (options.a) mfs.push(nTerm+\"C-1O-1(+1)$a\"+i);\n    if (options.b) mfs.push(nTerm+\"(+1)$b\"+i);\n    if (options.c) mfs.push(nTerm+\"NH3(+1)$c\"+i);\n}\n\nfunction addCTerm(mfs, cTerm, i, options) {\n    if (options.x) mfs.push(\"CO(+1)\"+cTerm+\"$x\"+i);\n    if (options.y) mfs.push(\"H2(+1)\"+cTerm+\"$y\"+i);\n    if (options.z) mfs.push(\"N-1H-1(+1)\"+cTerm+\"$z\"+i);\n}\n\n},{\"./amino_acid\":2,\"./isoElectricPoint\":3}],2:[function(require,module,exports){\n'use strict';\n\n// SOURCE: https://en.wikipedia.org/wiki/Amino_acid\nmodule.exports = [\n    // Standard amino acids\n    {\n        name: \"Alanine\",\n        aa3: \"Ala\",\n        aa1: \"A\",\n        sc: {\n            type: \"hydrophobic\"\n        },\n        pKaC: 2.33,\n        pKaN: 9.71\n    },\n    {\n        name: \"Arginine\",\n        aa3: \"Arg\",\n        aa1: \"R\",\n        sc: {\n            type: \"positive\",\n            pKa: 12.10\n        },\n        pKaC: 2.03,\n        pKaN: 9.00\n    },\n    {\n        name: \"Asparagine\",\n        aa3: \"Asn\",\n        aa1: \"N\",\n        sc: {\n            type: \"polar\"\n        },\n        pKaC: 2.13,\n        pKaN: 9.05\n    },\n    {\n        name: \"Aspartic acid\",\n        aa3: \"Asp\",\n        aa1: \"D\",\n        sc: {\n            type: \"negative\",\n            pKa: 3.71\n        },\n        pKaC: 1.95,\n        pKaN: 9.66\n    },\n    {\n        name: \"Cysteine\",\n        aa3: \"Cys\",\n        aa1: \"C\",\n        sc: {\n            type: \"special\",\n            pKa: 8.14\n        },\n        pKaC: 1.91,\n        pKaN: 10.28\n    },\n    {\n        name: \"Glutamic acid\",\n        aa3: \"Glu\",\n        aa1: \"E\",\n        sc: {\n            type: \"negative\",\n            pKa: 4.15\n        },\n        pKaC: 2.16,\n        pKaN: 9.58\n    },\n    {\n        name: \"Glutamine\",\n        aa3: \"Gln\",\n        aa1: \"Q\",\n        sc: {\n            type: \"polar\"\n        },\n        pKaC: 2.18,\n        pKaN: 9.00\n    },\n    {\n        name: \"Glycine\",\n        aa3: \"Gly\",\n        aa1: \"G\",\n        sc: {\n            type: \"special\"\n        },\n        pKaC: 2.34,\n        pKaN: 9.58\n    },\n    {\n        name: \"Histidine\",\n        aa3: \"His\",\n        aa1: \"H\",\n        sc: {\n            type: \"positive\",\n            pKa: 6.04\n        },\n        pKaC: 1.70,\n        pKaN: 9.09\n    },\n    {\n        name: \"Isoleucine\",\n        aa3: \"Ile\",\n        aa1: \"I\",\n        sc: {\n            type: \"hydrophobic\"\n        },\n        pKaC: 2.26,\n        pKaN: 9.60\n    },\n    {\n        name: \"Leucine\",\n        aa3: \"Leu\",\n        aa1: \"L\",\n        sc: {\n            type: \"hydrophobic\"\n        },\n        pKaC: 2.32,\n        pKaN: 9.58\n    },\n    {\n        name: \"Lysine\",\n        aa3: \"Lys\",\n        aa1: \"K\",\n        sc: {\n            type: \"positive\",\n            pKa: 10.67\n        },\n        pKaC: 2.15,\n        pKaN: 9.16\n    },\n    {\n        name: \"Methionine\",\n        aa3: \"Met\",\n        aa1: \"M\",\n        sc: {\n            type: \"hydrophobic\"\n        },\n        pKaC: 2.16,\n        pKaN: 9.08\n    },\n    {\n        name: \"Phenylalanine\",\n        aa3: \"Phe\",\n        aa1: \"F\",\n        sc: {\n            type: \"hydrophobic\"\n        },\n        pKaC: 2.18,\n        pKaN: 9.09\n    },\n    {\n        name: \"Proline\",\n        aa3: \"Pro\",\n        aa1: \"P\",\n        sc: {\n            type: \"special\"\n        },\n        pKaC: 1.95,\n        pKaN: 10.47\n    },\n    {\n        name: \"Serine\",\n        aa3: \"Ser\",\n        aa1: \"S\",\n        sc: {\n            type: \"polar\"\n        },\n        pKaC: 2.13,\n        pKaN: 9.05\n    },\n    {\n        name: \"Threonine\",\n        aa3: \"Thr\",\n        aa1: \"T\",\n        sc: {\n            type: \"polar\"\n        },\n        pKaC: 2.20,\n        pKaN: 8.96\n    },\n    {\n        name: \"Tryptophan\",\n        aa3: \"Trp\",\n        aa1: \"W\",\n        sc: {\n            type: \"hydrophobic\"\n        },\n        pKaC: 2.38,\n        pKaN: 9.34\n    },\n    {\n        name: \"Tyrosine\",\n        aa3: \"Tyr\",\n        aa1: \"Y\",\n        sc: {\n            type: \"hydrophobic\"\n        },\n        pKaC: 2.24,\n        pKaN: 9.04\n    },\n    {\n        name: \"Valine\",\n        aa3: \"Val\",\n        aa1: \"V\",\n        sc: {\n            type: \"hydrophobic\"\n        },\n        pKaC: 2.27,\n        pKaN: 9.52\n    },\n    // Additional\n    {\n        name: \"Selenocysteine\",\n        aa3: \"Sec\",\n        aa1: \"U\"\n    },\n    {\n        name: \"Pyrrolysine\",\n        aa3: \"Pyl\",\n        aa1: \"O\"\n    },\n    // Ambiguous\n    {\n        name: \"Asparagine or aspartic acid\",\n        aa3: \"Asx\",\n        aa1: \"B\"\n    },\n    {\n        name: \"Glutamine or glutamic acid\",\n        aa3: \"Glx\",\n        aa1: \"Z\"\n    },\n    {\n        name: \"Leucine or isoleucine\",\n        aa3: \"Xle\",\n        aa1: \"J\"\n    },\n    {\n        name: \"Unspecified or unknown\",\n        aa3: \"Xaa\",\n        aa1: \"X\"\n    }\n];\n\n},{}],3:[function(require,module,exports){\n'use strict';\n\n\nvar aa = require('./amino_acid');\n\n// we will convert the data to an object to be much faster\nvar aaObject={};\nfor (var i=0; i<aa.length; i++) {\n    aaObject[aa[i].aa3]=aa[i];\n}\n\n\n\nfunction calculateCharge(aas, pH) {\n    if (! pH) pH=7.0;\n    var combined=combine(aas);\n    if (!combined) return;\n    var charge=calculateForPh(combined, pH);\n    return Math.round(charge*1000)/1000;\n}\n\n// this methods required an array of aas\n\nfunction calculateIEP(aas) {\n    var combined=combine(aas);\n    if (!combined) return;\n    var first=0;\n    var last=14;\n    var current=14;\n    var previous=0;\n    var currentCharge;\n    while (Math.abs(current-previous)>0.0001) {\n        previous=current;\n        current=(last + first) / 2;\n        currentCharge=calculateForPh(combined, current);\n        if (currentCharge>0) {\n            first=current;\n        } else if (currentCharge<0) {\n            last=current;\n        } else {\n            previous=current;\n        }\n    }\n    return Math.round(current*1000)/1000;\n}\n\nfunction calculateChart(aas) {\n    var combined=combine(aas);\n    if (!combined) return;\n    var y=[];\n    var yAbs=[];\n    for (var i=0; i<=14; i=i+0.01) {\n        var charge=calculateForPh(combined, i);\n        y.push(charge);\n        yAbs.push(Math.abs(charge));\n    }\n    combined.y=y;\n    combined.yAbs=yAbs;\n\n    return combined;\n}\n\n\nfunction calculateForPh(combined, pH) {\n    var total=0;\n    total+=1/(1+Math.pow(10,pH-combined.first));\n    total+=-1/(1+Math.pow(10,combined.last-pH));\n    for (var key in combined.acid) {\n        total+=-combined.acid[key]/(1+Math.pow(10,aaObject[key].sc.pKa-pH));\n    }\n    for (var key in combined.basic) {\n        total+=combined.basic[key]/(1+Math.pow(10,pH-aaObject[key].sc.pKa));\n    }\n    return total;\n}\n\n// we will combine the amino acids\nfunction combine(aas) {\n    var combined={};\n    if (aaObject[aas[0]]) {\n        combined.first=aaObject[aas[0]].pKaN;\n    } else {\n        return;\n    }\n    if (aaObject[aas[aas.length-1]]) {\n        combined.last=aaObject[aas[aas.length-1]].pKaC;\n    } else {\n        return;\n    }\n    combined.basic={};\n    combined.acid={};\n    for (var i=0; i<aas.length; i++) {\n        var aa=aas[i];\n        if (! aaObject[aa]) return;\n        if (aaObject[aa].sc && aaObject[aa].sc.type) {\n            if (aaObject[aa].sc.type==\"positive\") {\n                if (!combined.basic[aa]) {\n                    combined.basic[aa] = 0;\n                }\n                combined.basic[aa]++;\n            } else if (aaObject[aa].sc.type==\"negative\") {\n                if (!combined.acid[aa]) {\n                    combined.acid[aa] = 0;\n                }\n                combined.acid[aa]++;\n            }\n        }\n    }\n    return combined;\n}\n\n/*\n We can generate a color based on iep\n 0 -> 7 means that at pH 7 it is charged negatively (blue)\n 7 -> 14 means that at pH7 it is charged positively (red)\n */\nfunction getColor(iep) {\n    if (iep<7) {\n        if (iep<3) iep=3;\n        var white=Math.round(255-(7-iep)*(200/4));\n        return \"rgb(\"+white+\",\"+white+\",255)\";\n    } else if (iep>7) {\n        if (iep>11) iep=11;\n        var white=Math.round(255-(iep-7)*(200/4));\n        return \"rgb(255,\"+white+\",\"+white+\")\";\n    }\n    return \"rgb(255,255,255)\";\n}\n\nmodule.exports={\n    calculateIEP: calculateIEP,\n    calculateCharge: calculateCharge,\n    calculateChart: calculateChart,\n    getColor: getColor\n}\n\n\n},{\"./amino_acid\":2}]},{},[1])(1)\n});"],"sourceRoot":"/source/"}